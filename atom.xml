<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  
  <title><![CDATA[HENNG]]></title>
  <subtitle><![CDATA[Viva La Vida]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://henng.com//"/>
  <updated>2017-01-20T10:21:17.060Z</updated>
  <id>http://henng.com//</id>
  
  <author>
    <name><![CDATA[henng]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[BookKeeper]]></title>
    <link href="http://henng.com/2017/01/20/bookkeeper/"/>
    <id>http://henng.com/2017/01/20/bookkeeper/</id>
    <published>2017-01-20T10:13:46.000Z</published>
    <updated>2017-01-20T10:21:17.060Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>之前写了一篇关于 <a href="https://github.com/yahoo/pulsar" target="_blank" rel="external">Pulsar</a> 的简介，Pulsar 的存储这块使用了 Bookkeeper来完成，所以再简单介绍下 Bookkeeper。当时用英文写的，就懒得翻译了，看懂应该完全没问题。<a id="more"></a></p>
</blockquote>
<h2 id="Introduction_/_Key_Terms">Introduction / Key Terms</h2><p>BookKeeper is a replicated log service which can be used to build <em>replicated state machines.</em> </p>
<p>Main Features</p>
<ul>
<li>writing efficiently (by sequentially)</li>
<li>replicating for fault tolerance</li>
<li>scaling throughput</li>
</ul>
<p>Key Terms:</p>
<ul>
<li><strong>bookie</strong>: bokkeeper storage server</li>
<li><strong>ledger</strong>: log stream(a sequence of entries)</li>
<li>ledger <strong>entry</strong>: each unit of a log(record)</li>
<li><strong>ensemble</strong>: group of bookies</li>
<li><strong>quorums</strong>: replicas of entries(num of avaliable bookies)</li>
</ul>
<p>Here is a brief architecture diagram of bookkeeper.</p>
<p><img src="http://dl2.iteye.com/upload/attachment/0059/9489/9e5ce5f8-a69b-39b3-8727-48e5f69d3d94.jpg" alt="bookkeeper architecture"></p>
<h2 id="Write_/_Read">Write / Read</h2><p>Typically, we use bookkeeper by the following steps.</p>
<ol>
<li><p>Create a bookkeeper client;</p>
</li>
<li><p>Create a ledger;</p>
</li>
<li><p>Write to the ledger (add entries);</p>
</li>
<li><p>Close the ledger;</p>
<p>​</p>
</li>
<li><p>Open the same ledger for reading (by ledgerId);</p>
</li>
<li><p>Read from the ledger;</p>
</li>
<li><p>Close the ledger again;</p>
</li>
<li><p>Close the bookkeeper client.</p>
</li>
</ol>
<p>A quick demo is ready for you.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookKeeperDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger logger = LoggerFactory.getLogger(BookKeeperDemo.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String PASSWD = <span class="string">"passwd"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset Encoding = Charsets.UTF_8;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sampleTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        BookKeeper bookKeeper = <span class="keyword">new</span> BookKeeper(<span class="string">"localhost:2181"</span>);</span><br><span class="line">        LedgerHandle ledger = bookKeeper.createLedger(BookKeeper.DigestType.MAC, PASSWD.getBytes());</span><br><span class="line">        <span class="keyword">long</span> ledgerId = ledger.getId();</span><br><span class="line">        logger.info(<span class="string">"Writing to ledger: &#123;&#125;"</span>, ledgerId);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            String content = <span class="string">"entry-"</span> + i;</span><br><span class="line">            ledger.addEntry(content.getBytes(Encoding));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ledger.close();</span><br><span class="line"></span><br><span class="line">        ledger = bookKeeper.openLedger(ledgerId, BookKeeper.DigestType.MAC, PASSWD.getBytes());</span><br><span class="line"></span><br><span class="line">        Enumeration&lt;LedgerEntry&gt; entries = ledger.readEntries(<span class="number">0</span>, <span class="number">9</span>);</span><br><span class="line">        <span class="keyword">while</span> (entries.hasMoreElements()) &#123;</span><br><span class="line">            LedgerEntry entry = entries.nextElement();</span><br><span class="line">            String content = <span class="keyword">new</span> String(entry.getEntry(), Encoding);</span><br><span class="line">            logger.info(<span class="string">"Entry &#123;&#125;  length=&#123;&#125; content='&#123;&#125;'"</span>, entry.getEntryId(), entry.getLength(), content);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ledger.close();</span><br><span class="line">      	bookKeeper.close();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>It is worth nothing that only one process can write to a ledger (append), and it would be read-only after ledger is closed by normally or there is an exception. What happened when adding entries? First it will append EntryLog, then recording the related index in LedgerCache which is used for fast lookup, last transaction log is appended in Journal. LedgerHandler created a node in zookeeper for metadata, so it will knows who has my data.</p>
<p>While reading could only execute after a ledger is closed, and it will be requested to next bookie when first read found an entry is invalid.</p>
<h2 id="Recovery">Recovery</h2><p>As closing a ledger consists essentially of writing the last entry written to a ledger to zookeeper, the recovery procedure simply finds the last entry written correctly and writes it to zookeeper.</p>
<p>There are two kinds of recovery, by automatically which is the default way and by manually. Auditor is selected as a leader to watch zookeeper, scan and decide which need recovery. Auditor will create nodes in zookeeper when recovery needed, and ReplicationWorker watching the nodes created by Auditor, then the worker will start related tasks for the job.</p>
<h2 id="Performance">Performance</h2><p>There is a <a href="https://cwiki.apache.org/confluence/download/attachments/27832576/bookkeeper-hic-2011.pdf?version=1&amp;modificationDate=1322809384000" target="_blank" rel="external">reference</a> by Yahoo at Hadoop in China 2011.</p>
<h2 id="Pulsar_/_Managed-Ledger">Pulsar / Managed-Ledger</h2><p>How Pulsar uses bookkeeper? Pulsar created a library on top of bookkeeper ledger, which is called ManagedLedger, multi ledgers included. It opens(creates a new on if not exists) a ledger when creating persistent topic, adds entries when publishing messages, and reads entries(cache first, reads entries if cache oversize) when dispatching messages.</p>
<hr>
<p><strong>References</strong><br>[1] <a href="https://github.com/yahoo/pulsar" target="_blank" rel="external">Pulsar Github</a><br>[2] <a href="http://bookkeeper.apache.org/" target="_blank" rel="external">Apache BookKeeper</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>之前写了一篇关于 <a href="https://github.com/yahoo/pulsar">Pulsar</a> 的简介，Pulsar 的存储这块使用了 Bookkeeper来完成，所以再简单介绍下 Bookkeeper。当时用英文写的，就懒得翻译了，看懂应该完全没问题。]]>
    
    </summary>
    
      <category term="bookkeeper" scheme="http://henng.com/tags/bookkeeper/"/>
    
      <category term="mq" scheme="http://henng.com/tags/mq/"/>
    
      <category term="pulsar" scheme="http://henng.com/tags/pulsar/"/>
    
      <category term="原创" scheme="http://henng.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Pulsar 简介]]></title>
    <link href="http://henng.com/2016/11/19/pulsar-intro/"/>
    <id>http://henng.com/2016/11/19/pulsar-intro/</id>
    <published>2016-11-19T19:30:23.000Z</published>
    <updated>2016-11-19T15:23:34.083Z</updated>
    <content type="html"><![CDATA[<p>因为工作关系，会接触到不同类型的MQ。前段时间，调研了 Yahoo 开源的分布式消息中间件 - Pulsar。根据 Yahoo 的说法，Pulsar 诞生在 Kafka 之前，这就是他们为什么不用 Kafka 的原因。下面就介绍下 Pulsar 的各个方面。<a id="more"></a></p>
<h3 id="主要特性">主要特性</h3><ul>
<li>可水平扩展的集群（得益于 BookKeeper 的特性）</li>
<li>强顺序和一致性保证</li>
<li>低延迟</li>
<li>负载均衡</li>
<li>多租户/授权验证/配额</li>
<li>跨地理位置的复制</li>
</ul>
<h3 id="快速入门">快速入门</h3><ul>
<li><p>Topic</p>
<p>Pulsar Topic 有点特别，格式如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">persistent://my-property/us-west/my-namespace/my-topic</span><br></pre></td></tr></table></figure>
<p><code>persistent</code> 持久化的，目前唯一支持的存储类型，官方说未来可能支持 non-persistent 类型；</p>
<p><code>my-property</code> Property 定义一个租户，可以理解为一个用户；</p>
<p><code>us-west</code> Cluster，topic 所在的机房，地理位置；</p>
<p><code>my-namespace</code> Namespace 定义多个同组的 topics，可以理解为一个应用；</p>
<p><code>my-topic</code> Topic，最终的 Topic 名称，在代码里面也可能被称为 Destination。</p>
<p>总结起来可以这么看：</p>
<p><em>persistent://某个用户/地理机房/该用户的应用或业务/topic 名称</em></p>
</li>
<li><p>订阅模式</p>
<p>Pulsar 支持三种订阅模式：</p>
<ul>
<li>Exclusive：无论有多少实例，只会有一个实例能消费，可以保证消息顺序；</li>
<li>Shared：多个实例通过轮询方式各获得部分消息，不能保证消息顺序；</li>
<li>Failover：类似于 Exclusive 方式，始终只会有一个实例消费，但其他实例在该实例挂掉的时候可以补上去，也可以保证消息顺序；</li>
</ul>
<p>实际上，Pulsar 也支持 Listener 模式，不过二者互斥，使用 Subscribe 就不能使用 Listener 了。</p>
</li>
<li><p>Demo</p>
<p>直接看官方给的例子，非常简单，Pulsar 的 API 的确非常容易理解。目前官方提供 Java 版本，但其他语言的客户端也可以使用，Pulsar 有个 Websocket 模块负责和其他语言交互。在生产消费之前，你可以先起一个单例 server：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/pulsar standalone</span><br></pre></td></tr></table></figure>
<p><strong>Producer</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">PulsarClient client = PulsarClient.create(<span class="string">"http://localhost:8080"</span>);</span><br><span class="line"></span><br><span class="line">Producer producer = client.createProducer(</span><br><span class="line">            <span class="string">"persistent://sample/standalone/ns1/my-topic"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Publish 10 messages to the topic</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    producer.send(<span class="string">"my-message"</span>.getBytes());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">client.close();</span><br></pre></td></tr></table></figure>
<p><strong>Consumer</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">PulsarClient client = PulsarClient.create(<span class="string">"http://localhost:8080"</span>);</span><br><span class="line"></span><br><span class="line">Consumer consumer = client.subscribe(</span><br><span class="line">            <span class="string">"persistent://sample/standalone/ns1/my-topic"</span>,</span><br><span class="line">            <span class="string">"my-subscribtion-name"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">  <span class="comment">// Wait for a message</span></span><br><span class="line">  Message msg = consumer.receive();</span><br><span class="line"></span><br><span class="line">  System.out.println(<span class="string">"Received message: "</span> + msg.getData());</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Acknowledge the message so that it can be deleted by broker</span></span><br><span class="line">  consumer.acknowledge(msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">client.close();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="架构设计">架构设计</h3><p><img src="https://github.com/yahoo/pulsar/raw/master/docs/img/pulsar_system_architecture.png" alt="Architecture"></p>
<p>从上往下看，</p>
<ul>
<li><p>Producer/Consumer</p>
<p>Java 客户端</p>
</li>
<li><p>Service discovery</p>
<p>一个 HTTP 服务，提供 REST 接口，客户端先发送 HTTP 请求获取可用的服务器地址；</p>
</li>
<li><p>Dispatcher</p>
<p>一个异步的 TCP 服务，派发调度消息；</p>
</li>
<li><p>Load Balancer</p>
<p>负载均衡，通过CPU、Load等物理指标，以及 Pulsar Server 的服务指标，判断 Server 实例的负载情况，可用于自动将负载低的 Server 分配给某些 Topic；</p>
</li>
<li><p>Managed Ledger/BK Client/Cache</p>
<p>Pulsar 使用了 Apache BookKeeper 作为它的存储服务，因此在 BK 之上开发了 Managed Ledger 这样一层 lib，封装了很多对 BK Client 的操作。例如 Managed Ledger 里面使用了多个 Ledgers，因为一个 Ledger 只能由单线程写，且在崩溃后为只读状态，必须使用多个 Ledgers 来保障正常写入，同时也是并发性能考虑。Pulsar 会先从 Cache 里面拿数据，当积压超过 Cache 上限，再通过 BK Client 从 BK 里读取数据；</p>
</li>
<li><p>Global replicators</p>
<p>全局复制，这里主要指的是跨地理位置/跨机房的复制；主要原理就是从本地机房再转发一份数据到其他机房（跟正常的发送消息流程一样）；</p>
</li>
<li><p>Bookie</p>
<p>上面提到，Pulsar 使用 BookKeeper 作为存储服务，Bookie 就是 BookKeeper 的存储服务实例；</p>
</li>
<li><p>ZK/Global ZK</p>
<p>Pulsar 使用了多个 ZK，存储不同的数据：Global ZK 主要存储的例如 properties, namespaces 以及一些需要全局持久化的 policies；而 local ZK 主要存储本地集群相关数据，例如 topic 所有者元信息，server 的负载均衡结果，以及 BK Ledgers 的元信息数据等；</p>
</li>
</ul>
<h3 id="客户端">客户端</h3><ul>
<li><p>Produce</p>
<p>发送支持 “同步” 和 “异步” 方式，但看代码其实底层实现都是 “异步” 接口。“同步” 会等待服务器确认消息，异步则直接返回，只是把消息放入队列（a blocking queue）异步发送。这里顺便提一下 Pulsar 使用的是 Java8，运用了很多 Java8 的新特性。</p>
<p>消息支持 “LZ4”、“ZLIB” 两种压缩方式，以减少数据量节省带宽。支持批量发送。</p>
</li>
<li><p>Consume</p>
<p>消费同样支持 “同步” 和 “异步” 方式，底层同样都是 “异步” 接口，只是回调的区别而已。“同步” 会一直阻塞直到有消息可用，异步则直接返回，消息到达时会调用其回调方法。</p>
<p>消费的确认方式，可以一条消息一条消息的单独确认，也可以多个消息累计确认。使用累积确认时，只需对最后一条消息确认即可。需要注意的是，累积确认方式在 Shared 订阅模式下不可用。</p>
<p>前面也提到过，消费支持 Listener，消息达到时，会传给自定义的监听器。</p>
</li>
<li><p>Partitioned Topic</p>
<p>通常情况下，一个 topic 只能占据一个 server，这对于某些场景下来说，可能达不到要求的吞吐量性能。为了解决吞吐量，可以使用 Partitioned Topic，这点其实和 Kafka 很类似。对于 Pulsar 来说，Partitioned Topic 在内部其实等同于 N(N = Num of Partitions) 个普通 topic，订阅模式通用。</p>
<p>同 Kafka 类似，可以选择不同的策略，来决定消息发往哪个 Partition，例如 Key Hash、Round Robin 等策略。</p>
</li>
</ul>
<p>以上就是 Pulsar 的一点简介。至于Kafka，由于我接触的时候还是 0.8.2 版本，且正式环境使用的也是这个版本，企业图稳定不图更新，线上运行这么长的时间非常稳定，也没有贸然升级的计划。而目前 Kafka 已经迭代到 0.10.1 版本，更新了大量内容，重新设计了客户端，加入权限控制、Connector、Stream 等等，已经从传统意义的消息 MQ，升级为流处理平台。 因此我觉得 Kafka 系列可能就先到此为止，毕竟写出来也是有点过时了，但关于消息的那部分，应该还是万变不离其宗。如果你想沟通交流，可以和我联系。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>因为工作关系，会接触到不同类型的MQ。前段时间，调研了 Yahoo 开源的分布式消息中间件 - Pulsar。根据 Yahoo 的说法，Pulsar 诞生在 Kafka 之前，这就是他们为什么不用 Kafka 的原因。下面就介绍下 Pulsar 的各个方面。]]>
    
    </summary>
    
      <category term="kafka" scheme="http://henng.com/tags/kafka/"/>
    
      <category term="mq" scheme="http://henng.com/tags/mq/"/>
    
      <category term="pulsar" scheme="http://henng.com/tags/pulsar/"/>
    
      <category term="原创" scheme="http://henng.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[kafka 简介]]></title>
    <link href="http://henng.com/2016/09/10/kafka-intro/"/>
    <id>http://henng.com/2016/09/10/kafka-intro/</id>
    <published>2016-09-10T19:30:23.000Z</published>
    <updated>2016-11-19T15:24:23.676Z</updated>
    <content type="html"><![CDATA[<p>作为 kafka 系列文章的第一篇，在这里我们根据 <code>5H法</code> 来介绍 kafka；这篇文章其实更像是官方文档的译文，毕竟官方文档的阐述才是最好的，但会加一些自己的补充说明；其次因为是开篇介绍，暂时不会太深入，只做简单说明。<a id="more"></a></p>
<h2 id="WHAT_-_什么是_kafka">WHAT - 什么是 kafka</h2><blockquote>
<p>kafka 是一个高吞吐的分布式消息系统。kafka最初是由 Linkedin 公司开发，后划入 Apache 名下并开源。据说当时负责开发的 leader 正在读 Franz Kafka 的书，所以给取了名字叫 <code>kafka</code>。</p>
<p>基于 kafka，阐述几个关于消息系统的重要术语：</p>
<ul>
<li>topic: 消息的载体</li>
<li>producer: 消息发送者</li>
<li>consumer: 消息订阅者</li>
<li>broker: 即 server，存放 topics</li>
<li>cluster: 一个或多个 broker 组成的集群</li>
</ul>
<p>于是 kafka 的一个高度抽象的架构就出来了：</p>
<p><img src="http://kafka.apache.org/images/producer_consumer.png" alt="kafka"></p>
</blockquote>
<h2 id="WHY_-_为什么是_kafka">WHY - 为什么是 kafka</h2><blockquote>
<p>在 kafka 之前，已经有不少优秀的消息系统，例如 Rabbit MQ、 Active MQ，国内阿里的 MetaQ 等。那为什么 kafka 一下就火了呢？个人觉得 kafka 的火热离不开开源社区，尤其是 kafka 和其他开源项目（Storm、Spark、Hadoop、Flume等）的强强联合，构造了一个丰富强大的生态圈；当然 kafka 本身的优点也是原因之一，高吞吐、规模性、持久性、高可用等特性使其脱颖而出，这些在以后的文章中慢慢说明。</p>
</blockquote>
<h2 id="HOW_-_如何使用_kafka">HOW - 如何使用 kafka</h2><blockquote>
<p>kafka 运行需要 zookeeper，所以需要先启动 zk：</p>
<p>（1）启动 zk</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#62; bin/zookeeper-server-start.sh config/zookeeper.properties&#10;&#62;</span><br></pre></td></tr></table></figure>
<p>（2）启动 kafka broker</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#62; bin/kafka-server-start.sh config/server.properties&#10;&#62;</span><br></pre></td></tr></table></figure>
<p>（3）创建一个 topic</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#62; bin/kafka-topics.sh --create --zookeeper localhost:2181&#10; --replication-factor 1 --partitions 1 --topic test&#10;&#62;</span><br></pre></td></tr></table></figure>
<p>（4）producer 发送消息</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#62; bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test &#10;&#62; This is a message&#10;&#62; This is another message&#10;&#62;</span><br></pre></td></tr></table></figure>
<p>（5）consumer 消费消息</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#62; bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic test --from-beginning&#10;&#62; This is a message&#10;&#62; This is another message&#10;&#62;</span><br></pre></td></tr></table></figure>
<p><em>以上为最简单的使用例子，其中涉及的参数以后会详细说明。</em></p>
</blockquote>
<h2 id="WHERE_-_什么样的环境">WHERE - 什么样的环境</h2><blockquote>
<h4 id="磁盘">磁盘</h4><p>kafka 是高吞吐的消息系统，因此通常来说，磁盘是其一个瓶颈，对磁盘的转速要求还是比较高的，一般 7200 rpm 及以上。其次，是否做 RAID 取决于你的需求，做 RAID 的优点是会更稳定，这样更匹配 kafka 的数据备份容灾机制；缺点就是损失了不少磁盘容量空间。</p>
<h4 id="系统">系统</h4><p>按照 kafka 官方的说法，kafka 在 Unix 系统上运行是最稳定的，在 Linux/Solaris 上也经过测试，运行良好（我在生产环境使用 kafka 的系统是 centos，目前还没有发现过因操作系统引起的问题）。而在 Windows 机器上，运行有一些问题。</p>
</blockquote>
<h2 id="WHEN_-_常见应用场景">WHEN - 常见应用场景</h2><blockquote>
<h4 id="消息队列">消息队列</h4><p>这是 kafka 主要的应用场景，可以替代传统的消息队列。kafka 的高吞吐，对于大规模的消息处理系统来说也十分适合。</p>
<h4 id="日志聚合">日志聚合</h4><p>通常用于搜集大量的日志集中处理，我司日志系统就是使用的我们维护的 kafka。高吞吐量可以解决大量的日志数据的性能问题，良好的实时性提供了查看实时日志的特性等。</p>
<h4 id="流式处理">流式处理</h4><p>通常用于 “转移/传输” 数据。例如，从一个 RSS 源爬取了原始数据，然后推送到 kafka 某个 topic，接着经过去重、分类等再推送到了另一个 topic，最后才传到用户手中。可以和 Storm 等配合使用。</p>
</blockquote>
<ul>
<li>[1] 欢迎交流探讨，指出不足；我也会不断完善这个系列的文章。</li>
<li>[2] 参考链接：<a href="http://kafka.apache.org" target="_blank" rel="external">Apache Kafka</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>作为 kafka 系列文章的第一篇，在这里我们根据 <code>5H法</code> 来介绍 kafka；这篇文章其实更像是官方文档的译文，毕竟官方文档的阐述才是最好的，但会加一些自己的补充说明；其次因为是开篇介绍，暂时不会太深入，只做简单说明。]]>
    
    </summary>
    
      <category term="kafka" scheme="http://henng.com/tags/kafka/"/>
    
      <category term="mq" scheme="http://henng.com/tags/mq/"/>
    
      <category term="原创" scheme="http://henng.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[一年]]></title>
    <link href="http://henng.com/2016/07/21/oneyear/"/>
    <id>http://henng.com/2016/07/21/oneyear/</id>
    <published>2016-07-21T21:35:09.000Z</published>
    <updated>2016-07-21T13:36:48.967Z</updated>
    <content type="html"><![CDATA[<p>昨天，在京城一场少见的暴雨中，迎来了工作满一年的日子。去年同一天，签下人生第一份正式劳务合同，也就这么迈入上班族，这么挤入这个社会。</p>
<p>人总要在特殊的日子里，记些什么。<a id="more"></a></p>
<h2 id="关于工作">关于工作</h2><p>从工作中收获颇丰，主要还是自己专业技能的提升和职场经验的积累。其实现在的工作内容并非我当初的意向岗位，但我并没有排斥，因为我明白对于职场新人，磨练和增长技能才是最重要的，何况项目组有不少老员工，我可以学习。事实证明选择是正确的，团队氛围融洽，同事都很好相处，leader 也还算照顾我这种新人，学到很多，也非常感激。还记得第一天到公司报道就给我派任务了，说是要从实际编码中熟悉工作。刚开始什么都不太懂，公司的业务、开发的环境以及常规的流程，都还是未知。第一个任务前前后后差不多做了一个月，现在回过头去看，是比较简单的一个任务，最多一周搞定，这就是成长。</p>
<p>一开始接触的是公司内部私有的消息中间件，后来在 leader 带领下，开始给其他部门维护开源的 Kafka，并且有了较为完善的管理平台和相应的监控、报警系统，目前业界已公开的 Kafka 管理平台/工具都没有我们这套完善。我们也有计划将其管理端开源出去，回馈开源社区。这个管理平台，我贡献了绝大多数代码，当然这少不了其他同事的帮助；因此，整个一年中，我接触 Kafka 的时间最多，起码对这个开源的消息系统，有了一个基本的认识。打算后面陆续推出 Kafka 的系列文章，算是分享交流，也算是记录，给自己的交代。</p>
<h2 id="关于生活">关于生活</h2><p>林子大了，什么鸟都有；这座城市里，见识过的，听说过的，形形色色；吸收好的，远离坏的。也许我的观念会随着经历而改变，不变的是坚持对的事情。工作之外，仍是学习。学习自己的小爱好，学习更高更广的见识，学习明辨是非，控制情绪。</p>
<p>更多的是关于自己。喜欢深夜去马路对面的电影院看一场电影，再穿过夜色，赶一场未知的梦；喜欢再买来钢笔和墨水，翻出泛黄的笔记本，涂涂画画，写不完来往仓促；喜欢背起相机，在大街小巷里东拐西拐，一次快门换一个故事；喜欢三五好友一聚，尝遍美食美酒，付诸谈笑；喜欢布置好物，打点装饰，房间明亮，心间敞亮。</p>
<p>最喜欢你，在所有人事已非的景色里。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>昨天，在京城一场少见的暴雨中，迎来了工作满一年的日子。去年同一天，签下人生第一份正式劳务合同，也就这么迈入上班族，这么挤入这个社会。</p>
<p>人总要在特殊的日子里，记些什么。]]>
    
    </summary>
    
      <category term="原创" scheme="http://henng.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
      <category term="生活" scheme="http://henng.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[我为什么愤怒]]></title>
    <link href="http://henng.com/2016/05/14/why-angry/"/>
    <id>http://henng.com/2016/05/14/why-angry/</id>
    <published>2016-05-14T10:20:55.000Z</published>
    <updated>2016-05-14T02:34:28.463Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>为一片叶的飘落<br>在他理应翡绿的清晨</p>
<p>为一颗星的黯淡<br>在他理应光鲜的明夜<br><a id="more"></a></p>
<p>为一本书的遗弃<br>在他理应的爱不释手</p>
<p>为一个眼神的空洞<br>在他理应的坚定不移</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>为一片叶的飘落<br>在他理应翡绿的清晨</p>
<p>为一颗星的黯淡<br>在他理应光鲜的明夜<br>]]>
    
    </summary>
    
      <category term="原创" scheme="http://henng.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
      <category term="生活" scheme="http://henng.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Forward]]></title>
    <link href="http://henng.com/2016/02/20/self-examination/"/>
    <id>http://henng.com/2016/02/20/self-examination/</id>
    <published>2016-02-20T23:07:14.000Z</published>
    <updated>2016-02-20T15:43:58.719Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>What doesn’t kill you make you stronger.</p>
</blockquote>
<p>新年，开始反省。<a id="more"></a></p>
<h2 id="反省之一">反省之一</h2><p>不严谨。</p>
<p>16号开始年后的第一天上班，一周一共4天班，有3天都在解决问题。原本以为比较轻松的第一周，结果却很忙。虽说工作中遇到问题再正常不过了，但这么集中的出现，还是第一次。算是特别的经历。</p>
<p>上周遇到的其中一个问题，很大程度上是由于自己在写代码的时候不够严谨导致的，从而引起连锁反应。这个锅不能丢给代码审查的人，毕竟代码是自己写的。严谨一点、仔细一点，完全可以避免。</p>
<h2 id="反省之二">反省之二</h2><p>偷懒。</p>
<p>一月没有写博客，打破了之前计划的每月一篇博客安排，偷懒只在公众号发了一张图片。送自己一句话，“革命靠自觉”。自律自律自律，重要的事情说三遍。</p>
<p><em>嗯哼，最后祝自己生日快乐🎂🎂</em></p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>What doesn’t kill you make you stronger.</p>
</blockquote>
<p>新年，开始反省。]]>
    
    </summary>
    
      <category term="原创" scheme="http://henng.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
      <category term="生活" scheme="http://henng.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[致我们共同的24号]]></title>
    <link href="http://henng.com/2015/12/04/dear-kobe/"/>
    <id>http://henng.com/2015/12/04/dear-kobe/</id>
    <published>2015-12-04T23:55:35.000Z</published>
    <updated>2016-04-23T06:40:20.759Z</updated>
    <content type="html"><![CDATA[<p><img src="http://static.zybuluo.com/Henry/pzetifpjhesq6gndaxs3od2m/Untitled-911-1440x688.jpg" alt=""></p>
<p>2015年11月30日，在11月的最后一天，你终于说出了，“本赛季将是我的最后一个赛季”。</p>
<p>这一刻，终究来了。算一算，差不多正好十年。</p>
<p><a id="more"></a>大概是小学毕业、初一之前那个暑假，我开始接触到篮球。现在还记得那个篮球大大的，需要两只手才能投出去；质量是最差的那种，很容易就鼓包。但这一切，都不影响那份喜悦和兴奋。</p>
<p>于是我开始看球，开始了解什么是走步，什么是带球撞人。那时，你还穿着8号球衣，年轻气盛，如日中天，很自然喜欢上了你。初二的时候，8号换成了24号，你说你要24小时专注，利用好24秒进攻时间；我也相信是好强，要比那个传奇23号多一点。买了第一件24号球衣，假的；在当时那个小县城没有真的，我也买不起。但也不妨碍我喜欢得不得了，仿佛穿上了它，我就拥有了你的无所不能。</p>
<p>那个时候真是疯狂啊。重庆的夏天，下午2，3点正是最热的时候，跟院子里2个小伙伴出去打球。整个初中一直到高一，我们仨几乎去过县城里所有能进的球场。最常去的是西小、实验中学和县医院，一开始西小人多，大多数是和我们一样的年轻学生，实验更多的是大一点的高年级学生；后来县医院成了主要阵地，有很多大叔大爷都是民间高手，甚至偶尔撞上临县的县队球员，都一起切磋，一起互相鄙夷过。</p>
<p>高中也打球，但比起初中来真的少很多。高一还好，后面学习紧张，打得更少了。但是看球并没有停下，高中是寄宿，看不了电视，只能手机偷偷看，因为学校用手机也是不行的。那会儿流量少得可怜，都是看文字直播。上课看，下课看，做操也看。班上的球迷阵营大致有如下几类：凯尔特人是帅哥为代表，在08年夺冠后呵呵我湖；10年我湖终于一雪前耻，我、胖涛还有班长就呵呵回去；中间少不了唧唧歪歪的猩猩球迷赖儿。大伟哥，根儿哥，桥哥，辉哥，麻子，徐旭…哈哈，我忘了你们的阵营。</p>
<p>大学打球就更少，看比赛也比以前少，但你知道，我还是关注着你的。今天看到连岳先生发文，<a href="http://mp.weixin.qq.com/s?__biz=MjM5NDU0Mjk2MQ==&amp;mid=400873618&amp;idx=1&amp;sn=913c8a1a70723c8544c382e53d2b5b53&amp;scene=0#wechat_redirect" target="_blank" rel="external">《我为何喜欢科比》</a>，原来他也是科蜜啊。与他相同，后来我看比赛也很少，很同意连岳的话，“这些比赛，看了让人难受”；但与他不同，退役对我来说，始终还是伤感的。</p>
<p>你在 Muse 里说，“没有人可以打得比我好，因为没有人付出的比我多。因为你们都有太多的杂念、太多的羁绊，还没开始比赛，我已经赢了”。我们的确很难抛开杂念，放下羁绊。我想这正是连岳先生所提到的，“你特别喜欢某个球星，往深里想，总是因为他体现了你特别喜欢的特质。你没做到，他替你做到了，或者，你想像他一样做到。”</p>
<p>我还是会偶尔打打球，看看比赛。但即使再出现一个科比，我也不会追了。我在篮球上的青春，将随着你一起退役。</p>
<p>就像爱恋，狂热属于过去，理智终将占领当下。别问了，爱过。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p><img src="http://static.zybuluo.com/Henry/pzetifpjhesq6gndaxs3od2m/Untitled-911-1440x688.jpg" alt=""></p>
<p>2015年11月30日，在11月的最后一天，你终于说出了，“本赛季将是我的最后一个赛季”。</p>
<p>这一刻，终究来了。算一算，差不多正好十年。</p>
<p>]]>
    
    </summary>
    
      <category term="原创" scheme="http://henng.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
      <category term="生活" scheme="http://henng.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[山河故人]]></title>
    <link href="http://henng.com/2015/11/01/Mountains-May-Depart/"/>
    <id>http://henng.com/2015/11/01/Mountains-May-Depart/</id>
    <published>2015-11-01T00:19:41.000Z</published>
    <updated>2015-10-31T16:41:13.166Z</updated>
    <content type="html"><![CDATA[<p>有人说《山河故人》里的贾樟柯变了，变得故作玄虚，卖弄元素，讨好西方。可能越来越挑，可能为了吐槽而吐槽，一千个读者就有一千个哈姆雷特。</p>
<p>我这个哈姆雷特并不了解贾樟柯。</p>
<p>影片开头，怎么看怎么不像 20 来岁的 3 个人，以及他们之间的三角恋。经典而又狗血的高富帅与屌丝，外加女神的剧情，即使拍得如此乡土气息，也差点儿让我摇头叹息。当然，最终并没有违背女神投入高富帅怀抱的定理。<br><a id="more"></a></p>
<p>直到 “贾樟柯作品”、“山河故人” 的片名字幕升起，此时已经过去近 40 分钟。我才知道，故事这才开始。第一幕也就这样过去，时间到了 2014 年。</p>
<p>2014 年，我和你看了《天注定》。天注定《天注定》不会在国内上映，但很高兴和你有过这样的时间。</p>
<p>过了 10 多年，梁子回来了，患上了职业肺病。涛儿和晋生离了婚，变化都太大。坚决不要妻子去借钱的梁子，找到故友欲借钱，最终却在咳嗽中说没事。然而妻子还是凭着当年的喜帖，找到了涛儿，他们又见面了。涛儿父亲去世，张晋生竟然没有回来，只让 7 岁的儿子回来送终。为了和儿子多呆一会儿，选择最慢的绿皮火车，再去父亲走的那个车站缅怀，然而最后还是要送回儿子给晋生。儿子到乐跟着父亲出国澳大利亚，时间到了 2025 年。到乐长大了，却已经不会中文，还在课上学习中文。当初衣着光鲜亮丽的晋生，如今却胡须花白，汗衫白褂。</p>
<p>从 1999 到 2025，三段时间，一个不完整到故事。即使故事讲得不够完整，即使算不上一部完美的片子，科长也绝不只满足于讲故事。裸露的地表，起伏的煤价，冲天的大烟囱，坠落的农业飞机（据说影片后面被剪掉的几分钟是关于马航坠机事件的，我想这里本应有个呼应），作为矿工，梁子的尘肺职业病；两次特写扛着关公刀的少年；给女儿相亲时，父亲的一句“女儿啊”（重男轻女），送礼送的 iPhone 手机，红白喜事通吃的同一主持人；儿子叫妈咪（洋文），戴的丝巾被说不男不女，单手上香，不知道跪下祭祖，缺乏母爱导致长大后的恋母情结；政策反腐，躲到国外却仍操着故乡口音，手握杯茶，枪支遍地……哪一个不是这片土地上发生过或者正发生着的？</p>
<p>每个人都只能陪你走一段路。<br>不是所有东西都会被时间摧毁。<br>最终，《Go West》再次响起，她又在雪花中起舞，只有身后的文峰塔不曾改变。</p>
<p>有意思的是，科长都很应景的给 2025 拍了那么科幻的手机，然而过了10多年回到故乡的梁子，房子居然还没被拆迁，当年的新婚请帖也丝毫没褪色。</p>
<p>那就别褪色吧，山河故人。再见故人。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>有人说《山河故人》里的贾樟柯变了，变得故作玄虚，卖弄元素，讨好西方。可能越来越挑，可能为了吐槽而吐槽，一千个读者就有一千个哈姆雷特。</p>
<p>我这个哈姆雷特并不了解贾樟柯。</p>
<p>影片开头，怎么看怎么不像 20 来岁的 3 个人，以及他们之间的三角恋。经典而又狗血的高富帅与屌丝，外加女神的剧情，即使拍得如此乡土气息，也差点儿让我摇头叹息。当然，最终并没有违背女神投入高富帅怀抱的定理。<br>]]>
    
    </summary>
    
      <category term="movie" scheme="http://henng.com/tags/movie/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Inception]]></title>
    <link href="http://henng.com/2015/10/19/inception/"/>
    <id>http://henng.com/2015/10/19/inception/</id>
    <published>2015-10-19T21:31:31.000Z</published>
    <updated>2016-04-23T06:43:39.787Z</updated>
    <content type="html"><![CDATA[<p><img src="http://static.zybuluo.com/Henry/qgqkfi0ofsj1kfakjxxh7od8/p593669694.jpg" alt=""></p>
<p>目前为止，保持得最好的一个习惯，大概是每周一部电影吧。<br><a id="more"></a></p>
<p>偶然在网易云音乐上又听到 <em>Time</em>. 于是很自然地，便找来 Interstellar 的原声；又于是，在这个周末，重温了 Interstellar 和 Inception.</p>
<p>诺兰，很多人都喜欢的导演，我也是很多人。诺兰的电影其实主题都离不开爱和感情，Interstellar 里是父女的爱，Inception 中则是夫妻之间的感情。</p>
<p>在我眼里都是以大见小。什么是大？Interstellar 中的星际旅行是大，多维空间是大，宇宙、生命、时间和引力都是大；Inception 里盗梦、植梦是大，多层梦境是大；诺兰善于用很庞大很奇幻的概念和空间来构建体系，但他们其实都只表达了很小的东西，爱。而我们，会因为爱，做各种各样的事。无论是穿越整个星际去救你，还是去植梦以获得回家的权利，亦或只是一句问候、一次想念。</p>
<p>我酷爱独处的乐趣，无拘无束，却在想要分享的时刻，感到落荒而逃。</p>
<p>关了所有的灯。在寂静里，开始造自己的梦。Enjoy Time.</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="http://music.163.com/outchain/player?type=2&id=1426503&auto=1&height=66"></iframe>]]></content>
    <summary type="html">
    <![CDATA[<p><img src="http://static.zybuluo.com/Henry/qgqkfi0ofsj1kfakjxxh7od8/p593669694.jpg" alt=""></p>
<p>目前为止，保持得最好的一个习惯，大概是每周一部电影吧。<br>]]>
    
    </summary>
    
      <category term="movie" scheme="http://henng.com/tags/movie/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[我]]></title>
    <link href="http://henng.com/2015/09/13/me/"/>
    <id>http://henng.com/2015/09/13/me/</id>
    <published>2015-09-13T23:04:13.000Z</published>
    <updated>2015-09-13T15:10:44.064Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>麻痹呆滞的杰克是我<br>但不仅仅是我<br>叛逆张扬的泰勒也是我<br>但不仅仅是我</p>
<p>手握六便士的是我<br>但不仅仅是我<br>抬头看月亮的也是我<br>但不仅仅是我<br><a id="more"></a></p>
<p>挥霍和珍惜是我<br>但不仅仅是我<br>拥有和失去也是我<br>但不仅仅是我</p>
<p>一切都是我<br>但也都不仅仅是我</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>麻痹呆滞的杰克是我<br>但不仅仅是我<br>叛逆张扬的泰勒也是我<br>但不仅仅是我</p>
<p>手握六便士的是我<br>但不仅仅是我<br>抬头看月亮的也是我<br>但不仅仅是我<br>]]>
    
    </summary>
    
      <category term="原创" scheme="http://henng.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
      <category term="生活" scheme="http://henng.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[将 Hexo 配置到云端]]></title>
    <link href="http://henng.com/2015/06/28/cloud-hexo/"/>
    <id>http://henng.com/2015/06/28/cloud-hexo/</id>
    <published>2015-06-28T14:28:26.000Z</published>
    <updated>2016-04-23T07:03:05.419Z</updated>
    <content type="html"><![CDATA[<p>将 Hexo 环境放在云端，不用担心换了电脑，也不用担心系统平台不一样，只需要网络即可，一劳永逸。</p>
<p>因为换了新系统，又得重新配置 Hexo 博客环境。于是就想到，对于经常重装系统的同学来说，老是要重新配置 Hexo 就很麻烦；另外一点缺陷是在本地的 Hexo 只能在自己电脑上更新文章，如果出去在外地，换了一台电脑就没法更新文章了。如果能把 Hexo 配置到云端就好了，这样有网络就可以搞定，且不受系统平台的限制。</p>
<p>搜索了一圈，发现还是有人这么干的。不过相关的帖子好像不多，干货更少。主要发现两个工具:</p>
<a id="more"></a>
<blockquote>
<ul>
<li><a href="https://coding.net." target="_blank" rel="external">Coding</a> </li>
<li><a href="https://koding.com/" target="_blank" rel="external">Koding</a></li>
</ul>
</blockquote>
<p>这俩货从名字上就挺相似的，因此干的事情也差不多。试用了一圈，发现 <code>Koding</code> 比较慢，Terminal 也有点卡，可能是老外出品的吧，服务器在国外；而 <code>Coding</code> 速度则要快一些，国人作品，因此最终选择了 <code>Coding</code>。</p>
<h2 id="安装_Hexo">安装 Hexo</h2><p>注册账户之后，新建一个项目用于 Blog，然后进入 <code>WebIDE</code>， <code>Coding</code> 已经内置了搭建 Hexo 需要的 Git 和 node.js 环境，因此直接安装 Hexo 即可，点击右上角第一个图标打开 Terminal：</p>
<p><img src="http://static.zybuluo.com/Henry/smw7oj9q359ae9qsgmebbbkz/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-06-28%2012.52.07.png" alt=""></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm <span class="keyword">install</span> -g hexo</span><br></pre></td></tr></table></figure>
<p>如果安装成功，输入 <code>hexo</code> 会有相应的帮助提示：</p>
<p><img src="http://static.zybuluo.com/Henry/fouo5aeg8k3la39d1nm9tsay/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-06-28%2013.42.18.png" alt="hexo"></p>
<h2 id="初始化_Hexo">初始化 Hexo</h2><p>在终端下输入：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">hexo</span> init</span><br></pre></td></tr></table></figure>
<p><img src="http://static.zybuluo.com/Henry/dlev4nffvkclbkpnj58be4om/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-06-28%2013.44.29.png" alt=""></p>
<p>可以看到初始化之后，它提示我们不要忘了输入下面的命令（<strong>重要</strong>）来完成：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span></span><br></pre></td></tr></table></figure>
<h2 id="配置_SSH">配置 SSH</h2><p>配置 SSH 主要是为了将我们的博客文章 push 到 Github 上面去，你也可以 把整个 Blog 放到 <code>coding.net</code> 而不是 Github 上，不过 Coding 免费版好像不支持自定义域名，因此我只是把 Coding 用来搭建 Hexo 环境，不用来托管整个 Blog。</p>
<p>在终端输入：</p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -<span class="keyword">C</span> <span class="string">"your_email@example.com"</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><em>注意 <code>-C</code>为大写</em></p>
</blockquote>
<p>输入保存文件的位置（默认直接 Enter）：</p>
<p><img src="http://static.zybuluo.com/Henry/s6o7h5ab2utqwfafgl6fas3v/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-06-28%2013.55.24.png" alt=""></p>
<p>然后会要求输入密码：</p>
<p><img src="http://static.zybuluo.com/Henry/ex6t6812gk8idnqyd4kupj34/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-06-28%2013.55.46.png" alt=""></p>
<p>SSH 如果生成成功，则可以看到类似如下的界面：</p>
<p><img src="http://static.zybuluo.com/Henry/n1j6506onpgxmvoc2ubfimon/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-06-28%2013.56.24.png" alt=""></p>
<p>上面的图中，可以看到该 SSH 保存的位置，我们需要获得该 SSH 的具体内容，使用 <code>cat</code> 命令：</p>
<p><img src="http://static.zybuluo.com/Henry/tq8850h80gl8lh08iahbf265/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-06-28%2013.56.51.png" alt=""></p>
<p>然后把上面的内容复制到你的 Github 账户中的 SSH keys 即可。</p>
<p>接着设置一下相关用户信息，在以后的 deploy 中会用到：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user<span class="class">.name</span> <span class="string">"username"</span><span class="comment">//用户名</span></span><br><span class="line">git config --global user<span class="class">.email</span> <span class="string">"your_email@example.com"</span><span class="comment">//填写自己的邮箱</span></span><br></pre></td></tr></table></figure>
<h2 id="deploy_相关">deploy 相关</h2><p>修改 <code>_config.yml</code> 配置文件中 deploy 发布的相关内容：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repository</span>: <span class="attribute">https</span>:<span class="comment">//github.com/your_account/your_account.github.com.git</span></span><br><span class="line">  <span class="attribute">branch</span>: master</span><br></pre></td></tr></table></figure>
<p>把 <code>your_account</code> 换成你的 Github 的账户名，<strong>注意，Hexo 现在的版本，<code>type</code>一栏要写成 <code>git</code> 而不是 <code>github</code></strong>。</p>
<p>安装 git deployer 插件：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> hexo-deployer-git <span class="comment">--save</span></span></span><br></pre></td></tr></table></figure>
<p><code>coding.net</code> 也支持本地预览，菜单栏选择 <code>Tools -&gt; Generate Access Url</code>：</p>
<p><img src="http://static.zybuluo.com/Henry/1n1fncr5xesv70fzs8x86pog/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-06-28%2014.30.17.png" alt=""></p>
<p>端口号填入 <code>4000</code>，点击 <code>Generate</code>，需要注意的是这个地址有效时间为1小时：</p>
<p><img src="http://static.zybuluo.com/Henry/078g3u300tonfxa2whgm14jz/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-06-28%2014.30.41.png" alt=""></p>
<p>然后其他的配置，例如主题、其他插件什么的，和本地 Hexo 差不多，不再赘述，enjoy writing ：）</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>将 Hexo 环境放在云端，不用担心换了电脑，也不用担心系统平台不一样，只需要网络即可，一劳永逸。</p>
<p>因为换了新系统，又得重新配置 Hexo 博客环境。于是就想到，对于经常重装系统的同学来说，老是要重新配置 Hexo 就很麻烦；另外一点缺陷是在本地的 Hexo 只能在自己电脑上更新文章，如果出去在外地，换了一台电脑就没法更新文章了。如果能把 Hexo 配置到云端就好了，这样有网络就可以搞定，且不受系统平台的限制。</p>
<p>搜索了一圈，发现还是有人这么干的。不过相关的帖子好像不多，干货更少。主要发现两个工具:</p>]]>
    
    </summary>
    
      <category term="Coding" scheme="http://henng.com/tags/Coding/"/>
    
      <category term="Git" scheme="http://henng.com/tags/Git/"/>
    
      <category term="Github" scheme="http://henng.com/tags/Github/"/>
    
      <category term="Hexo" scheme="http://henng.com/tags/Hexo/"/>
    
      <category term="云" scheme="http://henng.com/tags/%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[在 Android Studio 中使用代理]]></title>
    <link href="http://henng.com/2015/06/27/hxgy/"/>
    <id>http://henng.com/2015/06/27/hxgy/</id>
    <published>2015-06-27T21:34:32.000Z</published>
    <updated>2016-04-23T07:09:55.043Z</updated>
    <content type="html"><![CDATA[<p>最近换了新系统，在重装 Android Studio 的时候，发现一个公益代理。在很多地方都需要用到代理，如果你有自己的代理当然很方便。这里主要是 “安利” 一个公益代理（代理也有公益，真是感激涕零。。）它来自 <a href="http://help.honx.in/posts/view/32854/" target="_blank" rel="external">红杏公益代理</a>。专门是给开发人员使用的，程序猿再次泪奔🙏。</p>
<p>红杏官方如是说：<br><a id="more"></a></p>
<blockquote>
<p>因为红杏暂时只能在 chrome 中使用，而且其他客户端的版本也正在开发中。所以目前对于开发人员来说，要装一些 IDE 的插件或者要用命令行装些库的时候，还是不太方便。</p>
<p>我们自己也被这个问题所困扰，所以我们自己部署了一个服务器作为自己的开发专用。用了一段时间之后，发现还是比较方便的，所以决定干脆把这个服务器免费开放出来，供所有的开发人员免费使用（无论你是不是红杏的付费用户）。</p>
</blockquote>
<h2 id="具体使用方法：">具体使用方法：</h2><p>打开 <code>设置</code>，然后搜索 <code>HTTP</code>，就会看到 <code>HTTP Proxy</code>，选择 <code>HTTP</code> 代理模式，<code>Host name</code>: hx.gy（注意主机名不能写成 <code>http://hx.gy</code>），<code>Port number</code>: 1080，最后点击确认。</p>
<p><img src="http://static.zybuluo.com/Henry/dpceqxo0djrkidimsj7z6z1p/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202015-06-27%2021.20.26.png" alt="settings"></p>
<p>这样就能顺畅进行相关开发工作了，如果没有生效，试试万能的 <code>重启</code>：）</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>最近换了新系统，在重装 Android Studio 的时候，发现一个公益代理。在很多地方都需要用到代理，如果你有自己的代理当然很方便。这里主要是 “安利” 一个公益代理（代理也有公益，真是感激涕零。。）它来自 <a href="http://help.honx.in/posts/view/32854/">红杏公益代理</a>。专门是给开发人员使用的，程序猿再次泪奔🙏。</p>
<p>红杏官方如是说：<br>]]>
    
    </summary>
    
      <category term="Android" scheme="http://henng.com/tags/Android/"/>
    
      <category term="Android Studio" scheme="http://henng.com/tags/Android-Studio/"/>
    
      <category term="代理" scheme="http://henng.com/tags/%E4%BB%A3%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[SSH 集合框架应用实例]]></title>
    <link href="http://henng.com/2015/06/04/ssh/"/>
    <id>http://henng.com/2015/06/04/ssh/</id>
    <published>2015-06-04T11:08:54.000Z</published>
    <updated>2016-04-23T07:45:59.363Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>本课程是基于 <a href="https://www.shiyanlou.com" target="_blank" rel="external">实验楼</a> 线上环境制作的，因此文档叙述和截图均与其有关。使用其他实验环境也没有太大影响，实验步骤是类似的。</p>
</blockquote>
<h2 id="一、实验说明及介绍">一、实验说明及介绍</h2><h3 id="1-_环境介绍">1. 环境介绍</h3><p>本实验环境采用带桌面的 Ubuntu Linux 环境，实验中可能会用到桌面上的程序：<a id="more"></a></p>
<ul>
<li>XfceTerminal：Linux 命令行终端，打开后会进入 Bash 环境，可以使用 Linux 命令</li>
<li>Firefox：浏览器，Web 应用会用到它</li>
<li>GVim：非常好用的编辑器，最简单的用法可以参考课程 <a href="http://www.shiyanlou.com/courses/2" target="_blank" rel="external">Vim编辑器</a></li>
<li>Eclipse：Eclipse 是著名的跨平台的自由集成开发环境（IDE）。主要用来 Java 语言开发，但是目前亦有人通过插件使其作为 C++ 和 Python 等语言的开发工具</li>
</ul>
<h3 id="2-_实验简介">2. 实验简介</h3><p>很多同学可能先后学习了 Spring、Struts 以及 Hibernate 课程（学习本项目课之前，您也应该先学习这三门课程）：</p>
<ul>
<li><a href="https://www.shiyanlou.com/courses/33" target="_blank" rel="external">Spring 框架入门教程</a></li>
<li><a href="https://www.shiyanlou.com/courses/32" target="_blank" rel="external">Struts 框架教程</a></li>
<li><a href="https://www.shiyanlou.com/courses/34" target="_blank" rel="external">Hibernate 框架教程</a></li>
</ul>
<p>今天我们就带给大家 3 种框架结合应用的实例，也就是常说的 SSH（Spring + Struts + Hibernate）集成框架，它是应用十分广泛的一种 Java Web 应用程序开发框架。通过这个例子，你会感受到 SSH 框架的强大之处，也会对之前学习的各种框架的应用和理解更加清晰、透彻。</p>
<ul>
<li>本次项目课的场景，假设为一个简单的用户管理网站，在数据库中存在的每一个用户都可以登录网站，然后可以在网站上面进行用户管理（增删改查）。<em>实际的使用场景可能不同，这里的场景假设只是为了便于大家学会理解和应用其中的相关操作</em>。</li>
</ul>
<h2 id="二、SSH_框架分析">二、SSH 框架分析</h2><p>SSH 框架也体现了典型的分层结构，分层有很多好处，例如项目整体的构架更加清晰，代码也更易维护和扩展。</p>
<p>通常来说，SSH 整体上大致可以用下图描述：</p>
<p><img src="http://static.zybuluo.com/Henry/r4eqj2ac850y0br187uflj8d/2015-05-29_102320.png" alt=""></p>
<p>在后面的编码过程中，最好结合这个框架分析图来理解，会更加清晰。</p>
<h2 id="三、项目准备工作">三、项目准备工作</h2><h3 id="1-_New_Project">1. New Project</h3><p>新建 Dynamic Web Project，命名为 SSH（遇到窗口显示不完整的问题，请将窗口放到最大化即可）</p>
<p><img src="http://static.zybuluo.com/Henry/0y1fu41ns7q8zjfm0a1qudwm/2015-05-28_154916.png" alt=""></p>
<h3 id="2-_导入依赖包">2. 导入依赖包</h3><p>先下载依赖包（由于依赖包比较大，这里分成了 3 个小包分别下载，但都要导入到项目中）：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>wget <span class="symbol">http:</span>/<span class="regexp">/labfile.oss.aliyuncs.com/courses</span><span class="regexp">/339/lib</span>-part1.zip</span><br><span class="line"><span class="variable">$ </span>wget <span class="symbol">http:</span>/<span class="regexp">/labfile.oss.aliyuncs.com/courses</span><span class="regexp">/339/lib</span>-part2.zip</span><br><span class="line"><span class="variable">$ </span>wget <span class="symbol">http:</span>/<span class="regexp">/labfile.oss.aliyuncs.com/courses</span><span class="regexp">/339/lib</span>-part3.zip</span><br></pre></td></tr></table></figure>
<p>分别解压 3 个小包，解压之后，<strong>将 3 个部分所有的 jar 包</strong>，全部都复制到工程目录下的 <code>WebContent/WEB-INF/lib</code> 目录下面（截图只包含部分 jar 包）：</p>
<p><img src="http://static.zybuluo.com/Henry/69jw8chyxlm5104obmkitze7/2015-05-28_155858.png" alt=""></p>
<h3 id="3-_web-xml">3. web.xml</h3><p>修改 web.xml（WebContent/WEB-INF/web.xml）文件如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">web-app</span> <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span> </span><br><span class="line"><span class="attribute">xmlns</span>=<span class="value">"http://java.sun.com/xml/ns/javaee"</span> </span><br><span class="line"><span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span> </span><br><span class="line"><span class="attribute">id</span>=<span class="value">"WebApp_ID"</span> <span class="attribute">version</span>=<span class="value">"3.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">display-name</span>&gt;</span>SSH<span class="tag">&lt;/<span class="title">display-name</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="title">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">welcome-file</span>&gt;</span>login.jsp<span class="tag">&lt;/<span class="title">welcome-file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">welcome-file-list</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- 配置 spring --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">listener</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="title">listener-class</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="title">listener</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">&lt;!-- 配置 spring 资源文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">context-param</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="title">param-name</span>&gt;</span> </span><br><span class="line">  	<span class="tag">&lt;<span class="title">param-value</span>&gt;</span>classpath:beans.xml<span class="tag">&lt;/<span class="title">param-value</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;/<span class="title">context-param</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">&lt;!-- 配置 struts --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">filter</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="title">filter-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">filter-class</span>&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="tag">&lt;/<span class="title">filter-class</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="title">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="title">filter-mapping</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="title">filter-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="title">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="title">filter-mapping</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="title">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-_package">4. package</h3><p>在 <code>Java Resources/src</code> 目录下，新建各层 package，方便后面的编码工作：</p>
<p><strong>PS：后续代码的讲解都在代码的注释中。</strong></p>
<p><img src="http://static.zybuluo.com/Henry/12g0zh7b8u6ob1zvkcv08dp7/2015-05-28_161005.png" alt=""></p>
<h3 id="5-_MySQL">5. MySQL</h3><h4 id="（1）启动_MySQL_服务">（1）启动 MySQL 服务</h4><p>输入密码：shiyanlou</p>
<p><img src="http://static.zybuluo.com/Henry/g47z0g7lwe8lsxk8czc479qu/2015-05-28_173130.png" alt=""></p>
<h4 id="（2）登录_MySQL">（2）登录 MySQL</h4><p><img src="http://static.zybuluo.com/Henry/jbcyhbfmyki0l6sy2em6elu5/2015-05-28_173305.png" alt=""></p>
<h4 id="（3）新建数据库_ssh">（3）新建数据库 ssh</h4><p><img src="http://static.zybuluo.com/Henry/lep212gtv86rvk4reczmemn0/2015-05-28_173420.png" alt=""></p>
<h2 id="四、Model">四、Model</h2><p>在 model 下新建一个实体类 <code>User.java</code>，以及它的映射文件 <code>User.hbm.xml</code>：</p>
<p><img src="http://static.zybuluo.com/Henry/r2vqykiuh87t5cnq84adajtw/2015-05-28_161735.png" alt=""></p>
<h3 id="1-_User-java">1. <code>User.java</code></h3><p>这个对象包含一个 id 主键，一个 name 属性以及 company 属性，很简单。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> shiyanlou.ssh.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> String company;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getCompany</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> company;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCompany</span><span class="params">(String company)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.company = company;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-_User-hbm-xml">2. <code>User.hbm.xml</code></h3><p>根据上面的对象，它的配置文件为：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="doctype">&lt;!DOCTYPE hibernate-mapping PUBLIC</span><br><span class="line">        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span><br><span class="line">        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">hibernate-mapping</span> <span class="attribute">package</span>=<span class="value">"shiyanlou.ssh.model"</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- class 和 table 对应 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">class</span> <span class="attribute">name</span>=<span class="value">"User"</span> <span class="attribute">table</span>=<span class="value">"ssh_test"</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	    <span class="comment">&lt;!-- 一一对应 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">id</span> <span class="attribute">name</span>=<span class="value">"id"</span> <span class="attribute">column</span>=<span class="value">"id"</span>&gt;</span><span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"name"</span> <span class="attribute">column</span>=<span class="value">"name"</span>&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span>		</span><br><span class="line">		<span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"company"</span> <span class="attribute">column</span>=<span class="value">"company"</span>&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span>	</span><br><span class="line">	<span class="tag">&lt;/<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="五、Dao">五、Dao</h2><p>在 dao 下新建一个 <code>UserDao.java</code> 接口，以及它的实现类 <code>UserDaoImpl.java</code>：</p>
<p><img src="http://static.zybuluo.com/Henry/qlin26i3p0ihq461paddx23g/2015-05-28_162725.png" alt=""></p>
<h3 id="1-_UserDao-java">1. <code>UserDao.java</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> shiyanlou.ssh.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> shiyanlou.ssh.model.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用以登录时检查数据库中是否存在该用户</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">checkUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 添加用户</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 删除用户</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">deleteUser</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 修改用户信息</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 查询用户</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">queryUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">queryById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 查询所有用户</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">queryAll</span><span class="params">()</span></span>;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-_UserDaoImpl-java">2. <strong><code>UserDaoImpl.java</code></strong></h3><figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line">package shiyanlou.ssh.dao;</span><br><span class="line"></span><br><span class="line"><span class="built_in">import</span> java.util.ArrayList;</span><br><span class="line"><span class="built_in">import</span> java.util.List;</span><br><span class="line"><span class="built_in">import</span> org.hibernate.Query;</span><br><span class="line"><span class="built_in">import</span> org.hibernate.Session;</span><br><span class="line"><span class="built_in">import</span> org.hibernate.SessionFactory;</span><br><span class="line"></span><br><span class="line"><span class="built_in">import</span> shiyanlou.ssh.model.User;</span><br><span class="line"></span><br><span class="line">public class UserDaoImpl implements UserDao &#123;</span><br><span class="line"></span><br><span class="line">	private SessionFactory sessionFactory;</span><br><span class="line">	</span><br><span class="line">	public SessionFactory getSessionFactory<span class="params">()</span> &#123;</span><br><span class="line">		return sessionFactory;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setSessionFactory<span class="params">(SessionFactory sessionFactory)</span> &#123;</span><br><span class="line">		this.sessionFactory = sessionFactory;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 登录时，检查用户是否存在于数据库中</span></span><br><span class="line">	@Override</span><br><span class="line">	public boolean checkUser<span class="params">(User user)</span> &#123;</span><br><span class="line">		<span class="comment">// <span class="doctag"><span class="keyword">TODO</span></span> Auto-generated method stub</span></span><br><span class="line">		<span class="comment">// 开启 session</span></span><br><span class="line">		Session session = sessionFactory.openSession<span class="params">()</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 开启事务</span></span><br><span class="line">		session.beginTransaction<span class="params">()</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 查询语句</span></span><br><span class="line">		Query query = session.createQuery<span class="params">(<span class="string">" from User u where u.id=:id and u.name=:name"</span>)</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 设定查询语句中变量的值</span></span><br><span class="line">		query.setParameter<span class="params">(<span class="string">"id"</span>, user.getId<span class="params">()</span>)</span>;</span><br><span class="line">		query.setParameter<span class="params">(<span class="string">"name"</span>, user.getName<span class="params">()</span>)</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 查询结果</span></span><br><span class="line">		User u = <span class="params">(User)</span>query.uniqueResult<span class="params">()</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 事务提交并关闭 session</span></span><br><span class="line">		session.getTransaction<span class="params">()</span>.commit<span class="params">()</span>;</span><br><span class="line">		session.close<span class="params">()</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 查询结果不为 null，说明存在则返回 true</span></span><br><span class="line">		<span class="keyword">if</span> <span class="params">(null != u )</span> &#123;</span><br><span class="line">			return <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 增加用户</span></span><br><span class="line">	@Override</span><br><span class="line">	public boolean addUser<span class="params">(User user)</span> &#123;</span><br><span class="line">		<span class="comment">// <span class="doctag"><span class="keyword">TODO</span></span> Auto-generated method stub</span></span><br><span class="line">		</span><br><span class="line">		Session session = sessionFactory.openSession<span class="params">()</span>;</span><br><span class="line">		session.beginTransaction<span class="params">()</span>;</span><br><span class="line">		session.save<span class="params">(user)</span>;</span><br><span class="line">		session.getTransaction<span class="params">()</span>.commit<span class="params">()</span>;</span><br><span class="line">		session.close<span class="params">()</span>;</span><br><span class="line">		return <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除用户</span></span><br><span class="line">	@Override</span><br><span class="line">	public boolean deleteUser<span class="params">(int id)</span> &#123;</span><br><span class="line">		<span class="comment">// <span class="doctag"><span class="keyword">TODO</span></span> Auto-generated method stub</span></span><br><span class="line">		Session session = sessionFactory.openSession<span class="params">()</span>;</span><br><span class="line">		session.beginTransaction<span class="params">()</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 通过 id 找到该 user</span></span><br><span class="line">		User u = <span class="params">(User)</span>session.get<span class="params">(User.class, id)</span>;</span><br><span class="line">		session.delete<span class="params">(u)</span>;</span><br><span class="line">		session.getTransaction<span class="params">()</span>.commit<span class="params">()</span>;</span><br><span class="line">		session.close<span class="params">()</span>;</span><br><span class="line">		return <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新用户信息</span></span><br><span class="line">	@Override</span><br><span class="line">	public boolean updateUser<span class="params">(User user)</span> &#123;</span><br><span class="line">		<span class="comment">// <span class="doctag"><span class="keyword">TODO</span></span> Auto-generated method stub</span></span><br><span class="line">		Session session = sessionFactory.openSession<span class="params">()</span>;</span><br><span class="line">		session.beginTransaction<span class="params">()</span>;</span><br><span class="line">		session.update<span class="params">(user)</span>;</span><br><span class="line">		session.getTransaction<span class="params">()</span>.commit<span class="params">()</span>;</span><br><span class="line">		session.close<span class="params">()</span>;</span><br><span class="line">		return <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户查询，用于在网页上根据不同条件的查询</span></span><br><span class="line">    <span class="comment">//（这里可以根据 name 或 company 查询，在后面的 JSP 页面中会体现）</span></span><br><span class="line">	@Override</span><br><span class="line">	public List&lt;User&gt; queryUser<span class="params">(User user)</span> &#123;</span><br><span class="line">		<span class="comment">// <span class="doctag"><span class="keyword">TODO</span></span> Auto-generated method stub</span></span><br><span class="line">		Session session = sessionFactory.openSession<span class="params">()</span>;</span><br><span class="line">		session.beginTransaction<span class="params">()</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 使用 StringBuffer 便于后面根据不同条件，连接查询语句</span></span><br><span class="line">		StringBuffer hq = new StringBuffer<span class="params">(<span class="string">" from User u where 1=1"</span>)</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 参数的值的集合</span></span><br><span class="line">		ArrayList&lt;String&gt; params = new ArrayList&lt;String&gt;<span class="params">()</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// name 不为空，则在查询语句中连接 name 查询条件</span></span><br><span class="line">        <span class="comment">// 并添加 name 的值，便于后面查询</span></span><br><span class="line">		<span class="keyword">if</span> <span class="params">(user.getName<span class="params">()</span> != null &amp;&amp; !<span class="string">""</span>.equals<span class="params">(user.getName<span class="params">()</span>)</span>)</span> &#123;</span><br><span class="line">			hq.append<span class="params">(<span class="string">" and u.name=?"</span>)</span>;</span><br><span class="line">			params.add<span class="params">(user.getName<span class="params">()</span>)</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 同上</span></span><br><span class="line">		<span class="keyword">if</span> <span class="params">(user.getCompany<span class="params">()</span> != null &amp;&amp; !<span class="string">""</span>.equals<span class="params">(user.getCompany<span class="params">()</span>)</span>)</span> &#123;</span><br><span class="line">			hq.append<span class="params">(<span class="string">" and u.company=?"</span>)</span>;</span><br><span class="line">			params.add<span class="params">(user.getCompany<span class="params">()</span>)</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 根据参数的数量，设定查询条件的个数</span></span><br><span class="line">		Query query = session.createQuery<span class="params">(hq.toString<span class="params">()</span>)</span>;</span><br><span class="line">		<span class="keyword">for</span> <span class="params">(int i = <span class="number">0</span>; i &lt; params.size<span class="params">()</span>; i++)</span> &#123;</span><br><span class="line">			query.setString<span class="params">(i, params.get<span class="params">(i)</span>)</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 查询结果</span></span><br><span class="line">		List&lt;User&gt; users = query.list<span class="params">()</span>;</span><br><span class="line">		</span><br><span class="line">		session.getTransaction<span class="params">()</span>.commit<span class="params">()</span>;</span><br><span class="line">		session.close<span class="params">()</span>;</span><br><span class="line">		return users;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过 id 查找用户</span></span><br><span class="line">	@Override</span><br><span class="line">	public User queryById<span class="params">(int id)</span> &#123;</span><br><span class="line">		<span class="comment">// <span class="doctag"><span class="keyword">TODO</span></span> Auto-generated method stub</span></span><br><span class="line">		Session session = sessionFactory.openSession<span class="params">()</span>;</span><br><span class="line">		session.beginTransaction<span class="params">()</span>;</span><br><span class="line">		User u = <span class="params">(User)</span>session.get<span class="params">(User.class, id)</span>;</span><br><span class="line">		session.getTransaction<span class="params">()</span>.commit<span class="params">()</span>;</span><br><span class="line">		session.close<span class="params">()</span>;</span><br><span class="line">		return u;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查找所有用户</span></span><br><span class="line">	@Override</span><br><span class="line">	public List&lt;User&gt; queryAll<span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// <span class="doctag"><span class="keyword">TODO</span></span> Auto-generated method stub</span></span><br><span class="line">		Session session = sessionFactory.openSession<span class="params">()</span>;</span><br><span class="line">		session.beginTransaction<span class="params">()</span>;</span><br><span class="line">		Query query = session.createQuery<span class="params">(<span class="string">" from User u"</span>)</span>;</span><br><span class="line">		List&lt;User&gt; users = query.list<span class="params">()</span>;</span><br><span class="line">		session.getTransaction<span class="params">()</span>.commit<span class="params">()</span>;</span><br><span class="line">		session.close<span class="params">()</span>;</span><br><span class="line">		return users;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-_hibernate-cfg-xml">3. <code>hibernate.cfg.xml</code></h3><p>在 <code>Java Resources/src</code> 目录下，新建 Hibernate 配置文件 <code>hibernate.cfg.xml</code>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span></span><br><span class="line"><span class="doctype">&lt;!DOCTYPE hibernate-configuration PUBLIC</span><br><span class="line">        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span><br><span class="line">        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">hibernate-configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">session-factory</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接设置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"connection.driver_class"</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/ssh<span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"connection.username"</span>&gt;</span>root<span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"connection.password"</span>&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 数据库方言设置：MySQL --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">        <span class="comment">&lt;!-- 开启 Hibernate 自动 session 管理 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"current_session_context_class"</span>&gt;</span>thread<span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 设置 SQL 语句输出到 Eclipse 控制台 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"format_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 第一次加载 hibernate 时根据 model 类会自动建立起表的结构（前提是先建立好数据库），以后加载 hibernate 时根据 model 类自动更新表结构，即使表结构改变了但表中的行仍然存在不会删除以前的行。--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 映射文件 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">mapping</span> <span class="attribute">resource</span>=<span class="value">"shiyanlou/ssh/model/User.hbm.xml"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="title">session-factory</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">hibernate-configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="六、Service">六、Service</h2><p>在 service 下新建一个 <code>UserService.java</code> 接口，以及它的实现类 <code>UserServiceImpl.java</code>，service 为 dao 的上层，它是直接调用 dao 层的相关操作的，相对来说要简单很多，因此这里也不详细解释了。</p>
<p><img src="http://static.zybuluo.com/Henry/97xe9rzw245ape2w2767u3uc/2015-05-28_171528.png" alt=""></p>
<h3 id="1-_UserService-java">1. <code>UserService.java</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> shiyanlou.ssh.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> shiyanlou.ssh.model.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">checkUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">deleteUser</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">queryUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">queryById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">queryAll</span><span class="params">()</span></span>;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-_UserServiceImpl-java">2. <code>UserServiceImpl.java</code></h3><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">package shiyanlou.ssh.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.<span class="type">List</span>;</span><br><span class="line"><span class="keyword">import</span> shiyanlou.ssh.dao.<span class="type">UserDao</span>;</span><br><span class="line"><span class="keyword">import</span> shiyanlou.ssh.model.<span class="type">User</span>;</span><br><span class="line"></span><br><span class="line">public class <span class="type">UserServiceImpl</span> implements <span class="type">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">	private <span class="type">UserDao</span> userDao;</span><br><span class="line">	</span><br><span class="line">	public <span class="type">UserDao</span> getUserDao() &#123;</span><br><span class="line">		<span class="keyword">return</span> userDao;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public <span class="type">void</span> setUserDao(<span class="type">UserDao</span> userDao) &#123;</span><br><span class="line">		this.userDao = userDao;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@<span class="type">Override</span></span><br><span class="line">	public boolean checkUser(<span class="type">User</span> user) &#123;</span><br><span class="line">		// <span class="type">TODO</span> <span class="type">Auto</span>-generated <span class="keyword">method</span> stub</span><br><span class="line">		<span class="keyword">if</span> ( userDao.checkUser(user) ) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@<span class="type">Override</span></span><br><span class="line">	public boolean addUser(<span class="type">User</span> user) &#123;</span><br><span class="line">		// <span class="type">TODO</span> <span class="type">Auto</span>-generated <span class="keyword">method</span> stub</span><br><span class="line">		<span class="keyword">return</span> userDao.addUser(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@<span class="type">Override</span></span><br><span class="line">	public boolean deleteUser(<span class="type">int</span> id) &#123;</span><br><span class="line">		// <span class="type">TODO</span> <span class="type">Auto</span>-generated <span class="keyword">method</span> stub</span><br><span class="line">		<span class="keyword">return</span> userDao.deleteUser(id);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@<span class="type">Override</span></span><br><span class="line">	public boolean updateUser(<span class="type">User</span> user) &#123;</span><br><span class="line">		// <span class="type">TODO</span> <span class="type">Auto</span>-generated <span class="keyword">method</span> stub</span><br><span class="line">		<span class="keyword">return</span> userDao.updateUser(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@<span class="type">Override</span></span><br><span class="line">	public <span class="type">List</span>&lt;<span class="type">User</span>&gt; queryUser(<span class="type">User</span> user) &#123;</span><br><span class="line">		// <span class="type">TODO</span> <span class="type">Auto</span>-generated <span class="keyword">method</span> stub</span><br><span class="line">		<span class="keyword">return</span> userDao.queryUser(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@<span class="type">Override</span></span><br><span class="line">	public <span class="type">User</span> queryById(<span class="type">int</span> id) &#123;</span><br><span class="line">		// <span class="type">TODO</span> <span class="type">Auto</span>-generated <span class="keyword">method</span> stub</span><br><span class="line">		<span class="keyword">return</span> userDao.queryById(id);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@<span class="type">Override</span></span><br><span class="line">	public <span class="type">List</span>&lt;<span class="type">User</span>&gt; queryAll() &#123;</span><br><span class="line">		// <span class="type">TODO</span> <span class="type">Auto</span>-generated <span class="keyword">method</span> stub</span><br><span class="line">		<span class="keyword">return</span> userDao.queryAll();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="七、Action">七、Action</h2><p>在 action 包下，新建类 <code>UserAction.java</code>，action 为 service 的上层，所以它会调用 service：</p>
<p><img src="http://static.zybuluo.com/Henry/fsotfutaolfaq5ni2ijw612q/2015-05-28_174446.png" alt=""></p>
<h3 id="1-_UserAction-java">1. <code>UserAction.java</code></h3><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> shiyanlou.ssh.action;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> shiyanlou.ssh.model.User;</span><br><span class="line"><span class="keyword">import</span> shiyanlou.ssh.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionContext;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span><br><span class="line">	 * </span><br><span class="line">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1</span>L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> User user;</span><br><span class="line">	<span class="keyword">private</span> UserService userService;</span><br><span class="line">	<span class="keyword">private</span> Map&lt;String, Object&gt; request;</span><br><span class="line">	<span class="keyword">private</span> Map&lt;String, Object&gt; session;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="function">User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> user;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.user = user;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="function">UserService <span class="title">getUserService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> userService;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">setUserService</span><span class="params">(UserService userService)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.userService = userService;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 将查询的所有结果放到上下文中</span></span><br><span class="line">	<span class="comment">// key 为 users，后面的 jsp 页面会用到</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function">String <span class="title">list</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		request = (Map)ActionContext.getContext().get(<span class="string">"request"</span>);</span><br><span class="line">		request.put(<span class="string">"users"</span>, userService.queryAll());</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 登录检查</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function">String <span class="title">checkUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">boolean</span> flag = userService.checkUser(user);</span><br><span class="line">		<span class="comment">// 检查有效</span></span><br><span class="line">		<span class="keyword">if</span> (flag) &#123;</span><br><span class="line">		    <span class="comment">// 将当前 user 对象放到 session 中</span></span><br><span class="line">			session = ActionContext.getContext().getSession();</span><br><span class="line">			session.put(<span class="string">"user1"</span>, user);</span><br><span class="line">			<span class="comment">// 返回所有结果显示在页面</span></span><br><span class="line">			<span class="function"><span class="keyword">return</span> <span class="title">list</span><span class="params">()</span></span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 检查无效</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 删除用户，之后再返回所有查询结果动态显示在页面上</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function">String <span class="title">deleteUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		userService.deleteUser(user.getId());</span><br><span class="line">		<span class="function"><span class="keyword">return</span> <span class="title">list</span><span class="params">()</span></span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 同上</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function">String <span class="title">addUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		userService.addUser(user);</span><br><span class="line">		<span class="function"><span class="keyword">return</span> <span class="title">list</span><span class="params">()</span></span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 修改用户信息，通过 id 找到要修改的用户</span></span><br><span class="line">	<span class="comment">// 并返回 "update" 字符串，用以跳转到修改页面</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function">String <span class="title">updateUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		user = userService.queryById(user.getId());</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"update"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 在修改页面完成修改，调用 service 的 update</span></span><br><span class="line">	<span class="comment">// 之后再返回所有查询结果动态显示在页面上</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function">String <span class="title">updateUserImpl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		userService.updateUser(user);</span><br><span class="line">		<span class="function"><span class="keyword">return</span> <span class="title">list</span><span class="params">()</span></span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据条件查询用户，查询结果放到上下文中</span></span><br><span class="line">    <span class="comment">// tag 用以标记，后面在 jsp 页面有体现</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function">String <span class="title">queryUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		request = (Map)ActionContext.getContext().get(<span class="string">"request"</span>);</span><br><span class="line">		request.put(<span class="string">"users2"</span>, userService.queryUser(user));</span><br><span class="line">		request.put(<span class="string">"tag"</span>, <span class="number">2</span>);</span><br><span class="line">		<span class="function"><span class="keyword">return</span> <span class="title">list</span><span class="params">()</span></span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-_beans-xml">2. <code>beans.xml</code></h3><p>在 <code>Java Resources/src</code> 目录下新建 Spring 配置文件 <code>beans.xml</code>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">beans</span> <span class="attribute">xmlns</span>=<span class="value">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       <span class="attribute">xmlns:context</span>=<span class="value">"http://www.springframework.org/schema/context"</span></span><br><span class="line">       <span class="attribute">xmlns:aop</span>=<span class="value">"http://www.springframework.org/schema/aop"</span></span><br><span class="line">       <span class="attribute">xmlns:tx</span>=<span class="value">"http://www.springframework.org/schema/tx"</span></span><br><span class="line">       <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://www.springframework.org/schema/beans</span><br><span class="line">       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span><br><span class="line">       http://www.springframework.org/schema/context</span><br><span class="line">       http://www.springframework.org/schema/context/spring-context-3.0.xsd</span><br><span class="line">       http://www.springframework.org/schema/tx</span><br><span class="line">       http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</span><br><span class="line">       http://www.springframework.org/schema/aop</span><br><span class="line">       http://www.springframework.org/schema/aop/spring-aop-3.2.xsd"</span></span><br><span class="line">       <span class="attribute">default-autowire</span>=<span class="value">"byName"</span></span><br><span class="line">&gt;</span></span><br><span class="line">		</span><br><span class="line">		  <span class="comment">&lt;!-- sessionFactory 的配置 --&gt;</span></span><br><span class="line">		  <span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"sessionFactory"</span> <span class="attribute">class</span>=<span class="value">"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"configLocation"</span> <span class="attribute">value</span>=<span class="value">"classpath:hibernate.cfg.xml"</span>&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">		  <span class="tag">&lt;/<span class="title">bean</span>&gt;</span> </span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 事物管理器 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"txManager"</span> <span class="attribute">class</span>=<span class="value">"org.springframework.orm.hibernate3.HibernateTransactionManager"</span>&gt;</span></span><br><span class="line">			  <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"sessionFactory"</span> <span class="attribute">ref</span>=<span class="value">"sessionFactory"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">bean</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 配置哪些类哪些方法使用事务 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">aop:config</span>&gt;</span></span><br><span class="line">		    <span class="comment">&lt;!-- 只对 service 层实施事务 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">aop:pointcut</span> <span class="attribute">expression</span>=<span class="value">"execution(public * shiyanlou.ssh.service..*.*(..))"</span> <span class="attribute">id</span>=<span class="value">"businessService"</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">aop:advisor</span> <span class="attribute">advice-ref</span>=<span class="value">"txAdvice"</span> <span class="attribute">pointcut-ref</span>=<span class="value">"businessService"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">aop:config</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 事务的传播特性 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">tx:advice</span> <span class="attribute">id</span>=<span class="value">"txAdvice"</span> <span class="attribute">transaction-manager</span>=<span class="value">"txManager"</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="title">tx:attributes</span>&gt;</span></span><br><span class="line">		      <span class="tag">&lt;<span class="title">tx:method</span> <span class="attribute">name</span>=<span class="value">"check*"</span> <span class="attribute">read-only</span>=<span class="value">"true"</span>/&gt;</span></span><br><span class="line">		      </span><br><span class="line">		    <span class="tag">&lt;/<span class="title">tx:attributes</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">tx:advice</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 各层的映射对应关系 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"userDao"</span> <span class="attribute">class</span>=<span class="value">"shiyanlou.ssh.dao.UserDaoImpl"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"sessionFactory"</span> <span class="attribute">ref</span>=<span class="value">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">bean</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"userService"</span> <span class="attribute">class</span>=<span class="value">"shiyanlou.ssh.service.UserServiceImpl"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"userDao"</span> <span class="attribute">ref</span>=<span class="value">"userDao"</span>&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">bean</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"userAction"</span> <span class="attribute">class</span>=<span class="value">"shiyanlou.ssh.action.UserAction"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"userService"</span> <span class="attribute">ref</span>=<span class="value">"userService"</span>&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">bean</span>&gt;</span></span><br><span class="line">		</span><br><span class="line"><span class="tag">&lt;/<span class="title">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-_structs-xml">3. <code>structs.xml</code></h3><p>同样在 <code>Java Resources/src</code> 目录下，新建 Struts 配置文件 <code>struts.xml</code>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="doctype">&lt;!DOCTYPE struts PUBLIC</span><br><span class="line">	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"</span><br><span class="line">	"http://struts.apache.org/dtds/struts-2.3.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">struts</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 启用开发者模式 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">constant</span> <span class="attribute">name</span>=<span class="value">"struts.devMode"</span> <span class="attribute">value</span>=<span class="value">"true"</span>&gt;</span><span class="tag">&lt;/<span class="title">constant</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 启用动态方法调用 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">constant</span> <span class="attribute">name</span>=<span class="value">"struts.enable.DynamicMethodInvocation"</span> <span class="attribute">value</span>=<span class="value">"true"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 根据不同的返回结果，给出不同的响应界面 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">package</span> <span class="attribute">name</span>=<span class="value">"user"</span> <span class="attribute">extends</span>=<span class="value">"struts-default"</span>  <span class="attribute">namespace</span>=<span class="value">"/"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">action</span> <span class="attribute">name</span>=<span class="value">"user"</span> <span class="attribute">class</span>=<span class="value">"shiyanlou.ssh.action.UserAction"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="title">result</span> <span class="attribute">name</span>=<span class="value">"error"</span>&gt;</span>/error.jsp<span class="tag">&lt;/<span class="title">result</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="title">result</span> <span class="attribute">name</span>=<span class="value">"success"</span>&gt;</span>/success.jsp<span class="tag">&lt;/<span class="title">result</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="title">result</span> <span class="attribute">name</span>=<span class="value">"update"</span>&gt;</span>/updateuser.jsp<span class="tag">&lt;/<span class="title">result</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="title">action</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">package</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">struts</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="八、JSP">八、JSP</h2><p>现在编码工作进入最后的阶段了，我们需要做的，就是根据前面的 Struts 的配置以及各种业务处理逻辑，建立各种 JSP 页面。</p>
<p>实验中，所有的页面，都在 <code>WebContent/</code> 下新建。</p>
<h3 id="1-_login-jsp">1. <code>login.jsp</code></h3><p>登录页面，也是程序启动的默认首页，登录时验证 id 和 name 是否存在于数据库中。</p>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="vbscript">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><span class="xml"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 获取相关路径 --&gt;</span>    </span><br><span class="line"></span><span class="vbscript">&lt;%</span><br><span class="line"><span class="built_in">String</span> path = <span class="built_in">request</span>.getContextPath();</span><br><span class="line"><span class="built_in">String</span> basePath = <span class="built_in">request</span>.getScheme()+<span class="string">"://"</span>+<span class="built_in">request</span>.getServerName()+<span class="string">":"</span>+<span class="built_in">request</span>.getServerPort()+path+<span class="string">"/"</span>;</span><br><span class="line">%&gt;</span><span class="xml"></span><br><span class="line">    </span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"Content-Type"</span> <span class="attribute">content</span>=<span class="value">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">title</span>&gt;</span>Login Page<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="title">center</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">h1</span>&gt;</span>Please Login First<span class="tag">&lt;/<span class="title">h1</span>&gt;</span><span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!-- 登录时 form 表单提交给 checkUser Action 处理 --&gt;</span>  </span><br><span class="line">    	<span class="tag">&lt;<span class="title">form</span> <span class="attribute">action</span>=<span class="value">"</span></span></span><span class="vbscript">&lt;%=basePath%&gt;</span><span class="xml"><span class="tag"><span class="value">user!checkUser.action"</span> <span class="attribute">method</span>=<span class="value">"post"</span>&gt;</span></span><br><span class="line">    	User Id:<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"user.id"</span> <span class="attribute">style</span>=<span class="value">"width: 100px;"</span>/&gt;</span><span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line">    	User Name<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"user.name"</span> <span class="attribute">style</span>=<span class="value">"width: 100px;"</span>/&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"submit"</span> <span class="attribute">value</span>=<span class="value">"Login"</span>/&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="title">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">center</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="2-_success-jsp">2. <code>success.jsp</code></h3><p>登录验证成功，进入管理页面。</p>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="vbscript">&lt;%@ page language=<span class="string">"java"</span>  import=<span class="string">"java.util.*"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><span class="xml"></span><br><span class="line">    </span><br><span class="line"></span><span class="vbscript">&lt;%</span><br><span class="line"><span class="built_in">String</span> path = <span class="built_in">request</span>.getContextPath();</span><br><span class="line"><span class="built_in">String</span> basePath = <span class="built_in">request</span>.getScheme()+<span class="string">"://"</span>+<span class="built_in">request</span>.getServerName()+<span class="string">":"</span>+<span class="built_in">request</span>.getServerPort()+path+<span class="string">"/"</span>;</span><br><span class="line">%&gt;</span><span class="xml"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- c 标签，后面会使用到 --&gt;</span></span><br><span class="line"></span><span class="vbscript">&lt;%@taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span> %&gt;</span><span class="xml"></span><br><span class="line">    </span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"Content-Type"</span> <span class="attribute">content</span>=<span class="value">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">title</span>&gt;</span>Welcome<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css"></span><br><span class="line">    <span class="tag">td</span><span class="rules">&#123;</span><br><span class="line">		<span class="rule"><span class="attribute">text-align</span>:<span class="value"> center</span></span>;</span><br><span class="line">		<span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">	&#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- checkUser Action 返回 user1，这里就可以得到用户名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">align</span>=<span class="value">"right"</span>&gt;</span>Welcome, $&#123;user1.name &#125; | <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"logout.jsp"</span>&gt;</span>Exit<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">center</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="title">table</span> <span class="attribute">border</span>=<span class="value">"1"</span>&gt;</span></span><br><span class="line">    			<span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">    				<span class="tag">&lt;<span class="title">td</span>&gt;</span>user id<span class="tag">&lt;/<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">td</span>&gt;</span>user name<span class="tag">&lt;/<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">td</span>&gt;</span>company<span class="tag">&lt;/<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">td</span> <span class="attribute">colspan</span>=<span class="value">"2"</span> <span class="attribute">style</span>=<span class="value">"center"</span>&gt;</span>Options<span class="tag">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line">    			<span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- UserAction 中的 list() 返回 users，遍历它就得到所有的查询结果 --&gt;</span></span><br><span class="line">    			<span class="tag">&lt;<span class="title">c:forEach</span> <span class="attribute">items</span>=<span class="value">"$&#123;users&#125;"</span> <span class="attribute">var</span>=<span class="value">"u"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- 以表格形式展现所有结果，最后一栏是操作（包含删除和修改） --&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 删除、修改都提交给各自的 Action 处理，通过 id 来判断是哪个用户 --&gt;</span></span><br><span class="line">    				<span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">    					<span class="tag">&lt;<span class="title">td</span>&gt;</span>$&#123;u.id&#125;<span class="tag">&lt;/<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">td</span>&gt;</span>$&#123;u.name&#125;<span class="tag">&lt;/<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">td</span>&gt;</span>$&#123;u.company&#125;<span class="tag">&lt;/<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"user!deleteUser.action?user.id=$&#123;u.id&#125;"</span>&gt;</span>Delete<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"user!updateUser.action?user.id=$&#123;u.id&#125;"</span>&gt;</span>Modify<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line">    				<span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line">    			<span class="tag">&lt;/<span class="title">c:forEach</span>&gt;</span></span><br><span class="line">    			</span><br><span class="line">    		<span class="tag">&lt;/<span class="title">table</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 添加用户按钮 --&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"submit"</span> <span class="attribute">value</span>=<span class="value">"Add User"</span> <span class="attribute">onclick</span>=<span class="value">"window.location.href='adduser.jsp'"</span>/&gt;</span> </span><br><span class="line">    	<span class="tag">&lt;/<span class="title">center</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line">    	</span><br><span class="line">        <span class="comment">&lt;!-- 查询用户输入框，包含 name、company 两种查询条件 --&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">center</span>&gt;</span></span><br><span class="line">		   	<span class="tag">&lt;<span class="title">form</span> <span class="attribute">action</span>=<span class="value">"user!queryUser.action"</span> <span class="attribute">method</span>=<span class="value">"post"</span>&gt;</span></span><br><span class="line">		   		user name<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"user.name"</span>/&gt;</span>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">		   		company<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"user.company"</span>/&gt;</span>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;	</span><br><span class="line">		   		<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"submit"</span> <span class="attribute">value</span>=<span class="value">"Search"</span>/&gt;</span></span><br><span class="line">		   <span class="tag">&lt;/<span class="title">form</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="title">center</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">br</span>&gt;</span><span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- tag&gt;0 表示查询结果正常--&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">c:if</span> <span class="attribute">test</span>=<span class="value">"$&#123;tag&gt;0&#125;"</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">center</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="title">table</span> <span class="attribute">border</span>=<span class="value">"1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- 查询结果也以表格形式展现 --&gt;</span></span><br><span class="line">    			<span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">    				<span class="tag">&lt;<span class="title">td</span>&gt;</span>user id<span class="tag">&lt;/<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">td</span>&gt;</span>user name<span class="tag">&lt;/<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">td</span>&gt;</span>company<span class="tag">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line">    			<span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    			<span class="comment">&lt;!-- users2 就是 UserAction 中的 queryUser() 返回的结果，同样是遍历 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">c:forEach</span> <span class="attribute">items</span>=<span class="value">"$&#123;users2&#125;"</span> <span class="attribute">var</span>=<span class="value">"u"</span>&gt;</span></span><br><span class="line">    				<span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">    					<span class="tag">&lt;<span class="title">td</span>&gt;</span>$&#123;u.id&#125;<span class="tag">&lt;/<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">td</span>&gt;</span>$&#123;u.name&#125;<span class="tag">&lt;/<span class="title">td</span>&gt;</span><span class="tag">&lt;<span class="title">td</span>&gt;</span>$&#123;u.company &#125;<span class="tag">&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line">    				<span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line">    			<span class="tag">&lt;/<span class="title">c:forEach</span>&gt;</span></span><br><span class="line">    			</span><br><span class="line">    		<span class="tag">&lt;/<span class="title">table</span>&gt;</span></span><br><span class="line">    		</span><br><span class="line">    	<span class="tag">&lt;/<span class="title">center</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="title">c:if</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="3-_error-jsp">3. <code>error.jsp</code></h3><p>登录验证失败，给出一个错误页面提示即可，非常简单。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">%@</span> <span class="attribute">page</span> <span class="attribute">language</span>=<span class="value">"java"</span> <span class="attribute">contentType</span>=<span class="value">"text/html; charset=UTF-8"</span></span><br><span class="line">    <span class="attribute">pageEncoding</span>=<span class="value">"UTF-8"</span><span class="value">%</span>&gt;</span></span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"Content-Type"</span> <span class="attribute">content</span>=<span class="value">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">title</span>&gt;</span>Sorry!<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">Login failed!</span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-_adduser-jsp">4. <code>adduser.jsp</code></h3><p>增加用户的页面，注意 id 为主键，因此不能为空，也不能和其他的重复。把表单提交给 addUser Action 就可以了。</p>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="vbscript">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><span class="xml"></span><br><span class="line">    </span><br><span class="line"></span><span class="vbscript">&lt;%</span><br><span class="line"><span class="built_in">String</span> path = <span class="built_in">request</span>.getContextPath();</span><br><span class="line"><span class="built_in">String</span> basePath = <span class="built_in">request</span>.getScheme()+<span class="string">"://"</span>+<span class="built_in">request</span>.getServerName()+<span class="string">":"</span>+<span class="built_in">request</span>.getServerPort()+path+<span class="string">"/"</span>;</span><br><span class="line">%&gt;</span><span class="xml"></span><br><span class="line">    </span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"Content-Type"</span> <span class="attribute">content</span>=<span class="value">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">title</span>&gt;</span>Add New User<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">center</span>&gt;</span> <span class="tag">&lt;<span class="title">h1</span>&gt;</span>Add User<span class="tag">&lt;/<span class="title">h1</span>&gt;</span><span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line">    user id cannot be null or same as others</span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="title">form</span> <span class="attribute">action</span>=<span class="value">"user!addUser.action"</span> <span class="attribute">method</span>=<span class="value">"post"</span>&gt;</span></span><br><span class="line">        user id<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"user.id"</span>/&gt;</span><span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line">        user name<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"user.name"</span>/&gt;</span><span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line">        company<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"user.company"</span>/&gt;</span><span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"submit"</span> <span class="attribute">value</span>=<span class="value">"Add"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="title">form</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">   <span class="tag">&lt;/<span class="title">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="5-_updateuser-jsp">5. <code>updateuser.jsp</code></h3><p>修改用户信息，同上面类似（不提供 id 修改）。注意这里的 Action 为 <code>updateUserImpl</code>。</p>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="vbscript">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><span class="xml"></span><br><span class="line"> </span><br><span class="line"> </span><span class="vbscript">&lt;%</span><br><span class="line"><span class="built_in">String</span> path = <span class="built_in">request</span>.getContextPath();</span><br><span class="line"><span class="built_in">String</span> basePath = <span class="built_in">request</span>.getScheme()+<span class="string">"://"</span>+<span class="built_in">request</span>.getServerName()+<span class="string">":"</span>+<span class="built_in">request</span>.getServerPort()+path+<span class="string">"/"</span>;</span><br><span class="line">%&gt;</span><span class="xml"></span><br><span class="line">    </span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"Content-Type"</span> <span class="attribute">content</span>=<span class="value">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">title</span>&gt;</span>Modify User Info<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">center</span>&gt;</span> <span class="tag">&lt;<span class="title">h1</span>&gt;</span>Modify User Info<span class="tag">&lt;/<span class="title">h1</span>&gt;</span><span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">form</span> <span class="attribute">action</span>=<span class="value">"user!updateUserImpl.action"</span> <span class="attribute">method</span>=<span class="value">"post"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"hidden"</span> <span class="attribute">name</span>=<span class="value">"user.id"</span> <span class="attribute">value</span>=<span class="value">"$&#123;user.id&#125;"</span>  <span class="attribute">readonly</span>=<span class="value">"readonly"</span>/&gt;</span><span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line">        user name<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"user.name"</span> <span class="attribute">value</span>=<span class="value">"$&#123;user.name&#125;"</span>/&gt;</span><span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line">        company<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">name</span>=<span class="value">"user.company"</span> <span class="attribute">value</span>=<span class="value">"$&#123;user.company&#125;"</span>/&gt;</span><span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"submit"</span> <span class="attribute">value</span>=<span class="value">"OK"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;/<span class="title">center</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="6-_logout-jsp">6. <code>logout.jsp</code></h3><p>退出网站，把 session 清空，再设置页面跳转到首页登录页面即可。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="at_rule">@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">    </span><br><span class="line">&lt;% </span><br><span class="line">session.<span class="function">invalidate</span>()</span>; </span><br><span class="line"><span class="tag">response</span><span class="class">.sendRedirect</span>("<span class="tag">login</span><span class="class">.jsp</span>");</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<h2 id="九、运行测试">九、运行测试</h2><h3 id="1-_登录">1. 登录</h3><p>右击项目，选择 <code>Run As</code> —&gt; <code>Run On Server</code>，稍等片刻，即可看到登录页面：</p>
<p><img src="http://static.zybuluo.com/Henry/y1jcgvr4h7i7rl5pm1j6iacn/2015-05-29_131128.png" alt=""></p>
<p>输入下面的命令，可以看到该数据库中，已经有 <code>ssh_test</code> 这张 table 了，但是目前还是张空表：</p>
<p><img src="http://static.zybuluo.com/Henry/w8cz09gww8cdkv14sf1oinux/2015-05-29_131543.png" alt=""></p>
<p>因为登录时我们要检查输入的数据是否存在与数据库中，因此我们先插入一条数据，例如:</p>
<p><img src="http://static.zybuluo.com/Henry/ca4k0wu4gti9w7lwkeg6axks/2015-05-29_131606.png" alt=""></p>
<p>再输入刚刚插入的数据，即可登录并进入管理页面（可以看到刚刚插入的数据，显示在页面上了）：</p>
<p><img src="http://static.zybuluo.com/Henry/0dwx90blfykbyb1ivyxflpop/2015-05-29_132031.png" alt=""></p>
<h3 id="2-_用户管理（增删改查）">2. 用户管理（增删改查）</h3><h4 id="（1）新增用户">（1）新增用户</h4><p>点击 <code>Add User</code> 按钮，输入数据来新增用户，例如：</p>
<p><img src="http://static.zybuluo.com/Henry/vbzjotegc17ggw3paf9ej3a5/2015-05-29_132421.png" alt=""></p>
<p>点击 <code>Add</code> 即可添加成功，页面展示：</p>
<p><img src="http://static.zybuluo.com/Henry/2slx9mryc2p7tlibzcqytose/2015-05-29_132536.png" alt=""></p>
<p>对比验证后台数据库中表的数据，也是一致的：</p>
<p><img src="http://static.zybuluo.com/Henry/g3b7fu4w9tae3w3wmuvzq0uz/2015-05-29_132614.png" alt=""></p>
<h4 id="（2）删除用户">（2）删除用户</h4><p>我们把上面新增的 id 为 124 的用户删除掉，点击 Options 中的 Delete 即可。</p>
<p>对比验证后台数据库中表的数据（保持一致），可以看到之前是两条数据，现在也只有一条了：</p>
<p><img src="http://static.zybuluo.com/Henry/1bvdf1so5rnw0bpz1jhfdn7f/2015-05-29_132950.png" alt=""></p>
<h4 id="（3）修改用户信息">（3）修改用户信息</h4><p>点击 Options 中的 Modify 修改用户信息，例如把 id 为 123 的用户信息修改为：</p>
<p><img src="http://static.zybuluo.com/Henry/he2a4q94pgh2mwa84w1w8955/2015-05-29_133923.png" alt=""></p>
<p>可以看到修改成功了：</p>
<p><img src="http://static.zybuluo.com/Henry/sv1kl8anobjhfrkewqly95st/2015-05-29_133935.png" alt=""></p>
<p>同样，你也可以验证后台数据库也是一致的。</p>
<h4 id="（4）查找用户">（4）查找用户</h4><p>为了演示查找的特性，我们先多新建几个用户，例如：</p>
<p><img src="http://static.zybuluo.com/Henry/do8vyvkqv1c5tloij0eqh5hn/2015-05-29_134320.png" alt=""></p>
<p>我们先查找 <code>name=&quot;hr&quot;</code> （company 为空）的用户，结果为（最后一个表格是查找结果）：</p>
<p><img src="http://static.zybuluo.com/Henry/e6syx1h0pmz8auv42xljqoag/2015-05-29_134408.png" alt=""></p>
<p>再查找 <code>company=&quot;shiyanlou&quot;</code> （name 为空）的用户，结果为：</p>
<p><img src="http://static.zybuluo.com/Henry/8635df3amc3kzcyy2qkqj4nc/2015-05-29_134427.png" alt=""></p>
<p>最后，再查找 <code>name=&quot;hr&quot;</code> 并且 <code>company=&quot;shiyanlou&quot;</code> 的用户：</p>
<p><img src="http://static.zybuluo.com/Henry/obrajja2bk7sj229w9ecggyy/2015-05-29_134451.png" alt=""></p>
<p>可以看到，条件查找是很灵活、多样的。</p>
<h2 id="十、作业思考">十、作业思考</h2><ul>
<li><p>本次项目课的内容比较多，建议多动手操作几遍，并且仔细回顾和思考，才能真正理解。</p>
</li>
<li><p>退出操作存在不完善的地方，退出后按返回键仍然可以进行操作，考虑如何完善它。</p>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>本课程是基于 <a href="https://www.shiyanlou.com">实验楼</a> 线上环境制作的，因此文档叙述和截图均与其有关。使用其他实验环境也没有太大影响，实验步骤是类似的。</p>
</blockquote>
<h2 id="一、实验说明及介绍">一、实验说明及介绍</h2><h3 id="1-_环境介绍">1. 环境介绍</h3><p>本实验环境采用带桌面的 Ubuntu Linux 环境，实验中可能会用到桌面上的程序：]]>
    
    </summary>
    
      <category term="Hibernate" scheme="http://henng.com/tags/Hibernate/"/>
    
      <category term="Java" scheme="http://henng.com/tags/Java/"/>
    
      <category term="SSH" scheme="http://henng.com/tags/SSH/"/>
    
      <category term="Spring" scheme="http://henng.com/tags/Spring/"/>
    
      <category term="Struts" scheme="http://henng.com/tags/Struts/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hibernate 框架]]></title>
    <link href="http://henng.com/2015/06/04/hibernate/"/>
    <id>http://henng.com/2015/06/04/hibernate/</id>
    <published>2015-06-04T10:59:13.000Z</published>
    <updated>2016-04-23T10:42:07.871Z</updated>
    <content type="html"><![CDATA[<p>Hibernate 是一个开源的对象关系映射框架，对 JDBC 进行了非常轻量级的对象封装，使得 Java 程序员可以随心所欲的使用对象编程思维来操纵数据库。Hibernate 可以应用在任何使用 JDBC 的场合。</p>
<p>直达 <a href="https://www.shiyanlou.com/teacher/courses/34" target="_blank" rel="external">Hibernate 框架教程</a>。<a id="more"></a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Hibernate 是一个开源的对象关系映射框架，对 JDBC 进行了非常轻量级的对象封装，使得 Java 程序员可以随心所欲的使用对象编程思维来操纵数据库。Hibernate 可以应用在任何使用 JDBC 的场合。</p>
<p>直达 <a href="https://www.shiyanlou.com/teacher/courses/34">Hibernate 框架教程</a>。]]>
    
    </summary>
    
      <category term="Hibernate" scheme="http://henng.com/tags/Hibernate/"/>
    
      <category term="Java" scheme="http://henng.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[网页版大白 - Baymax]]></title>
    <link href="http://henng.com/2015/05/13/baymax/"/>
    <id>http://henng.com/2015/05/13/baymax/</id>
    <published>2015-05-13T16:33:08.000Z</published>
    <updated>2016-04-23T07:51:56.379Z</updated>
    <content type="html"><![CDATA[<h2 id="查看_Demo"><a href="http://henng.com/baymax/Baymax.html"> 查看 Demo </a></h2><p>利用 HTML 和 CSS 完成的 Baymax，比较简单，以下是完整代码。<a id="more"></a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="doctype">&lt;!doctype html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">title</span>&gt;</span>Baymax<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line"><span class="tag">body</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#595959</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#baymax</span> <span class="rules">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*设置为 居中*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*高度*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">600px</span></span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*隐藏溢出*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">overflow</span>:<span class="value"> hidden</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#head</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">64px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*以百分比定义圆角的形状*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*背景*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#fff</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-bottom</span>:<span class="value"> -<span class="number">20px</span></span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*设置下边框的样式*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">border-bottom</span>:<span class="value"> <span class="number">5px</span> solid <span class="hexcolor">#e0e0e0</span></span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*属性设置元素的堆叠顺序；*/</span></span><br><span class="line">    <span class="comment">/*拥有更高堆叠顺序的元素总是会处于堆叠顺序较低的元素的前面*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">z-index</span>:<span class="value"> <span class="number">100</span></span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*生成相对定位的元素*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#eye</span>,</span><br><span class="line"><span class="id">#eye2</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">11px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">13px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#282828</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">30px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">27px</span></span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*旋转该元素*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotate</span>(<span class="number">8deg</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#eye2</span> <span class="rules">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*使其旋转对称*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotate</span>(-<span class="number">8deg</span>)</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">69px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">17px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#mouth</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">38px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">1.5px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#282828</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">34px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">10px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#torso</span>,</span><br><span class="line"><span class="id">#belly</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">200px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">180px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#fff</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">47%</span></span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*设置边框*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">5px</span> solid <span class="hexcolor">#e0e0e0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">border-top</span>:<span class="value"> none</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">z-index</span>:<span class="value"> <span class="number">1</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#belly</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">300px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">245px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-top</span>:<span class="value"> -<span class="number">140px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">z-index</span>:<span class="value"> <span class="number">5</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#cover</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">190px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#fff</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">150px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> -<span class="number">20px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#heart</span><span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">25px</span></span></span>; </span><br><span class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">25px</span></span></span>; </span><br><span class="line">  <span class="rule"><span class="attribute">border-radius</span>:<span class="value"><span class="number">50%</span></span></span>; </span><br><span class="line">  <span class="rule"><span class="attribute">position</span>:<span class="value">relative</span></span>; </span><br><span class="line"></span><br><span class="line">  <span class="comment">/*向边框四周添加阴影效果*/</span></span><br><span class="line">  <span class="rule"><span class="attribute">box-shadow</span>:<span class="value"><span class="number">2px</span> <span class="number">5px</span> <span class="number">2px</span> <span class="hexcolor">#ccc</span> inset</span></span>; </span><br><span class="line"></span><br><span class="line">  <span class="rule"><span class="attribute">right</span>:<span class="value">-<span class="number">115px</span></span></span>; </span><br><span class="line">  <span class="rule"><span class="attribute">top</span>:<span class="value"><span class="number">40px</span></span></span>; </span><br><span class="line">  <span class="rule"><span class="attribute">z-index</span>:<span class="value"><span class="number">111</span></span></span>; </span><br><span class="line">  <span class="rule"><span class="attribute">border</span>:<span class="value"><span class="number">1px</span> solid <span class="hexcolor">#ccc</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#left-arm</span>,</span><br><span class="line"><span class="id">#right-arm</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">270px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">120px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#fff</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> -<span class="number">350px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> -<span class="number">100px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotate</span>(<span class="number">20deg</span>)</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">z-index</span>:<span class="value"> -<span class="number">1</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#right-arm</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotate</span>(-<span class="number">20deg</span>)</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> -<span class="number">620px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="id">#l-bigfinger</span>,</span><br><span class="line"><span class="id">#r-bigfinger</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">50px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">20px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#fff</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">250px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotate</span>(-<span class="number">50deg</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#r-bigfinger</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotate</span>(<span class="number">50deg</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#l-smallfinger</span>,</span><br><span class="line"><span class="id">#r-smallfinger</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">35px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">15px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#fff</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">195px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">66px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotate</span>(-<span class="number">40deg</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#r-smallfinger</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#fff</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotate</span>(<span class="number">40deg</span>)</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">195px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">37px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#left-leg</span>,</span><br><span class="line"><span class="id">#right-leg</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">170px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">90px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">40%</span> <span class="number">30%</span> <span class="number">10px</span> <span class="number">45%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#fff</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> -<span class="number">640px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> -<span class="number">45px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotate</span>(-<span class="number">1deg</span>)</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">z-index</span>:<span class="value"> -<span class="number">2</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="id">#right-leg</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#fff</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">border-radius</span>:<span class="value"><span class="number">30%</span> <span class="number">40%</span> <span class="number">45%</span> <span class="number">10px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> -<span class="number">810px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotate</span>(<span class="number">1deg</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"baymax"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 定义头部，包括两个眼睛、嘴 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"head"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"eye"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"eye2"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"mouth"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 定义躯干，包括心脏 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"torso"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"heart"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- 定义肚子腹部，包括 cover（和躯干的连接处） --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"belly"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"cover"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 定义左臂，包括一大一小两个手指 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"left-arm"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"l-bigfinger"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"l-smallfinger"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- 定义右臂，同样包括一大一小两个手指 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"right-arm"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"r-bigfinger"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"r-smallfinger"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- 定义左腿 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"left-leg"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- 定义右腿 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"right-leg"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<h2 id="查看_Demo"><a href="http://henng.com/baymax/Baymax.html"> 查看 Demo </a></h2><p>利用 HTML 和 CSS 完成的 Baymax，比较简单，以下是完整代码。]]>
    
    </summary>
    
      <category term="CSS" scheme="http://henng.com/tags/CSS/"/>
    
      <category term="HTML" scheme="http://henng.com/tags/HTML/"/>
    
      <category term="前端" scheme="http://henng.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Struts 框架教程]]></title>
    <link href="http://henng.com/2015/05/10/struts/"/>
    <id>http://henng.com/2015/05/10/struts/</id>
    <published>2015-05-10T11:07:28.000Z</published>
    <updated>2016-04-23T10:43:10.055Z</updated>
    <content type="html"><![CDATA[<p>Struts 是Apache软件基金会（ASF）赞助的一个开源项目。通过采用JavaServlet/JSP技术，实现了基于Java EEWeb应用的MVC设计模式的应用框架，是MVC经典设计模式中的一个经典产品。</p>
<p>点这里学习：<a href="https://www.shiyanlou.com/courses/32" target="_blank" rel="external">Struts 框架教程</a><a id="more"></a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Struts 是Apache软件基金会（ASF）赞助的一个开源项目。通过采用JavaServlet/JSP技术，实现了基于Java EEWeb应用的MVC设计模式的应用框架，是MVC经典设计模式中的一个经典产品。</p>
<p>点这里学习：<a href="https://www.shiyanlou.com/courses/32">Struts 框架教程</a>]]>
    
    </summary>
    
      <category term="Java" scheme="http://henng.com/tags/Java/"/>
    
      <category term="Struts" scheme="http://henng.com/tags/Struts/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Java 常用设计模式]]></title>
    <link href="http://henng.com/2015/04/26/design-pattern/"/>
    <id>http://henng.com/2015/04/26/design-pattern/</id>
    <published>2015-04-26T20:03:54.000Z</published>
    <updated>2016-04-23T10:43:41.299Z</updated>
    <content type="html"><![CDATA[<p>也是我在 <a href="https://www.shiyanlou.com/" target="_blank" rel="external">实验楼</a> 写的，涉及了常用的设计模式，包括工厂模式、抽象工厂模式、适配器模式、装饰者模式、观察者模式以及单例模式。</p>
<p>点这里学习：<a href="https://www.shiyanlou.com/courses/100" target="_blank" rel="external">Java进阶之设计模式</a><a id="more"></a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>也是我在 <a href="https://www.shiyanlou.com/">实验楼</a> 写的，涉及了常用的设计模式，包括工厂模式、抽象工厂模式、适配器模式、装饰者模式、观察者模式以及单例模式。</p>
<p>点这里学习：<a href="https://www.shiyanlou.com/courses/100">Java进阶之设计模式</a>]]>
    
    </summary>
    
      <category term="Design Pattern" scheme="http://henng.com/tags/Design-Pattern/"/>
    
      <category term="Java" scheme="http://henng.com/tags/Java/"/>
    
      <category term="设计模式" scheme="http://henng.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hadoop HBase Hive Mahout 全系列教程]]></title>
    <link href="http://henng.com/2015/04/26/hadoop-all/"/>
    <id>http://henng.com/2015/04/26/hadoop-all/</id>
    <published>2015-04-26T19:05:58.000Z</published>
    <updated>2015-07-06T17:52:50.131Z</updated>
    <content type="html"><![CDATA[<p>最近在 <a href="https://www.shiyanlou.com/" target="_blank" rel="external">实验楼</a> 实习，写了些东西。最先接触的是 Hadoop 系列，但我接手的时候是从 HBase 开始写的。不过，首先要学习的就是 Hadoop。</p>
<ul>
<li><h3 id="Hadoop">Hadoop</h3></li>
</ul>
<p>首先是 Hadoop 的教程，这里有几个关于 Hadoop 的文章。</p>
<p>1、<a href="https://www.shiyanlou.com/courses/35" target="_blank" rel="external">Hadoop部署及管理</a></p>
<p>2、<a href="http://blog.csdn.net/baolibin528/article/details/42939477" target="_blank" rel="external">Hadoop2.6.0伪分布环境搭建</a><br><a id="more"></a></p>
<ul>
<li><h3 id="HBase">HBase</h3></li>
</ul>
<p>其次是 HBase 的相关课程。HBase 是一个开源的非关系型分布式数据库（NoSQL），它参考了谷歌的 BigTable 建模，实现的编程语言为 Java。它是 Apache 软件基金会的 Hadoop 项目的一部分，运行于 HDFS 文件系统之上，为 Hadoop 提供类似于 BigTable 规模的服务，可以存储海量稀疏的数据，并具备一定的容错性、高可靠性及伸缩性。主要应用场景是实时随机读写超大规模的数据。</p>
<p>注意 Hadoop 和 HBase 的版本问题，不过使用实验楼的虚拟环境你可以不用担心这个问题，因为环境都是我们搭建好了的，直接使用即可，免费又方便。</p>
<p>直接进入并开始动手实验 <a href="https://www.shiyanlou.com/courses/37" target="_blank" rel="external">HBase 系列课程</a> . 后续的课程也可以直接使用实验楼的虚拟环境。</p>
<ul>
<li><h3 id="Hive">Hive</h3></li>
</ul>
<p>接着是 Hive 的相关课程。Hive 是一个基于 Hadoop 文件系统之上的数据仓库架构。它可以将结构化的数据文件映射为一张数据库表，并提供简单的 sql 查询功能。还可以将 sql 语句转换为 MapReduce 任务运行。</p>
<p>直接进入并开始动手实验 <a href="https://www.shiyanlou.com/courses/38" target="_blank" rel="external">Hive 教程</a> .</p>
<ul>
<li><h3 id="Mahout">Mahout</h3></li>
</ul>
<p>然后是 Mahout 的相关课程。Mahout 是 Apache Software Foundation（ASF） 旗下的一个开源项目，Mahout 目前在各种推荐系统中用得挺多的，提供一些可扩展的机器学习领域经典算法的实现，旨在帮助开发人员更加方便快捷地创建智能应用程序。</p>
<p>直接进入并开始动手实验 <a href="https://www.shiyanlou.com/courses/39" target="_blank" rel="external">Mahout 教程</a> .</p>
<ul>
<li><h3 id="Mahout_推荐系统">Mahout 推荐系统</h3></li>
</ul>
<p>最后介绍一个基于 Mahout 的推荐系统，它针对问答网站上的问答数据，使用 Mahout 来分析再给出推荐结果，即推荐用户他可能愿意回答的问题。</p>
<p>直接进入并开始动手实验 <a href="https://www.shiyanlou.com/courses/41" target="_blank" rel="external">问答网站推荐系统</a> .</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>最近在 <a href="https://www.shiyanlou.com/">实验楼</a> 实习，写了些东西。最先接触的是 Hadoop 系列，但我接手的时候是从 HBase 开始写的。不过，首先要学习的就是 Hadoop。</p>
<ul>
<li><h3 id="Hadoop">Hadoop</h3></li>
</ul>
<p>首先是 Hadoop 的教程，这里有几个关于 Hadoop 的文章。</p>
<p>1、<a href="https://www.shiyanlou.com/courses/35">Hadoop部署及管理</a></p>
<p>2、<a href="http://blog.csdn.net/baolibin528/article/details/42939477">Hadoop2.6.0伪分布环境搭建</a><br>]]>
    
    </summary>
    
      <category term="HBase" scheme="http://henng.com/tags/HBase/"/>
    
      <category term="Hadoop" scheme="http://henng.com/tags/Hadoop/"/>
    
      <category term="Hive" scheme="http://henng.com/tags/Hive/"/>
    
      <category term="Java" scheme="http://henng.com/tags/Java/"/>
    
      <category term="Mahout" scheme="http://henng.com/tags/Mahout/"/>
    
      <category term="大数据" scheme="http://henng.com/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="推荐系统" scheme="http://henng.com/tags/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[那个偷吃鱼皮花生的男孩]]></title>
    <link href="http://henng.com/2015/03/14/the-boy/"/>
    <id>http://henng.com/2015/03/14/the-boy/</id>
    <published>2015-03-14T13:54:15.000Z</published>
    <updated>2016-04-23T07:54:17.431Z</updated>
    <content type="html"><![CDATA[<p>想写这篇，已经很久了。</p>
<p>不知道为什么，现在才开始动笔。</p>
<p>以前我好像不怎么想家的，今年回学校几天，竟然有点想家。想想原因，可能是以前回去的地方，都不能被称为家吧。拆迁之后，一直是在外面租的房子，这次过年终于回居，虽然一切都不再一样，但这才是永远的居所。<a id="more"></a></p>
<p>忘了是哪天，在超市里见到一包鱼皮花生就买回来了。</p>
<p>我小时候很贪吃的，可能男孩子都比较调皮和好奇。我奶奶说过我很小的时候，经常在她们还在做饭的时候，拿案板上的肉吃，然后我就吃腻了以致于我后来都不爱吃肉。爷爷呢经常买一些吃的，就着喝点小酒。有一次我发现他床边的柜子上挂着一袋东西，摸了摸、看了看发现是一袋鱼皮花生。我立马就扣了个洞，小心翼翼勾出来一两个。为了不被发现，我每次都只吃一两个，然后我都不知道这样过了好多天，爷爷忽然发现他的零食怎么不对劲，我都不敢说是我干的坏事。</p>
<p>于是我想起来那个老房子。三层，两通。门前一个庭院，有各种果树和花木。小的时候有个夜晚玩捉迷藏，我很精灵的爬上院子里那棵樱桃树上，结果小伙伴怎么都找不到我，还是我自己忍不住笑，最后自己下来了。那株芦荟曾帮助叔叔缓解过烫伤，我养的仙人掌当时已经比我还高，桔子柚子自然不少，野生枇杷太小我都懒得吃，杏子、李子和樱桃总是招来各种尖嘴的鸟类，头顶一片葡萄藤是夏日最佳的消暑场所。</p>
<p>失去是一种常态。无论是你曾坚定不移的，还是你根本没在乎的。今年回家去，爷爷早已不再喝酒了，中风让他行动不便；奶奶身体也大不如从前。新的房子，好像也没有从前的热闹。</p>
<p>而那个偷吃鱼皮花生的男孩，已经为他们削过好多次水果皮。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>想写这篇，已经很久了。</p>
<p>不知道为什么，现在才开始动笔。</p>
<p>以前我好像不怎么想家的，今年回学校几天，竟然有点想家。想想原因，可能是以前回去的地方，都不能被称为家吧。拆迁之后，一直是在外面租的房子，这次过年终于回居，虽然一切都不再一样，但这才是永远的居所。]]>
    
    </summary>
    
      <category term="原创" scheme="http://henng.com/tags/%E5%8E%9F%E5%88%9B/"/>
    
      <category term="生活" scheme="http://henng.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="生活" scheme="http://henng.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[奇妙能力歌]]></title>
    <link href="http://henng.com/2014/12/09/qimiaonenglige/"/>
    <id>http://henng.com/2014/12/09/qimiaonenglige/</id>
    <published>2014-12-09T13:26:05.000Z</published>
    <updated>2015-07-06T17:52:50.131Z</updated>
    <content type="html"><![CDATA[<p>我看过沙漠下暴雨<br>看过大海亲吻鲨鱼<br>看过黄昏追逐黎明<br>没看过你</p>
<p>我知道美丽会老去<br>生命之外还有生命<br>我知道风里有诗句<br>不知道你<br><a id="more"></a></p>
<p>我听过荒芜变成热闹<br>听过尘埃掩埋城堡<br>听过天空拒绝飞鸟<br>没听过你</p>
<p>我明白眼前都是气泡<br>安静的才是苦口良药<br>明白什么才让我骄傲<br>不明白你</p>
<p>我拒绝更好更圆的月亮<br>拒绝未知的疯狂<br>拒绝声色的张扬<br>不拒绝你</p>
<p>我变成荒凉的景象<br>变成无所谓的模样<br>变成透明的高墙<br>没能变成你</p>
<p>我听过空境的回音<br>雨水浇绿孤山岭<br>听过被诅咒的秘密<br>没听过你</p>
<p>我抓住散落的欲望<br>缱绻的馥郁让我紧张<br>我抓住世间的假象<br>没抓住你</p>
<p>我包容六月清泉结冰<br>包容不老的生命<br>包容世界的迟疑<br>没包容你</p>
<p>我忘了置身濒绝孤岛<br>忘了眼泪不过失效药<br>忘了百年无声口号<br>没能忘记你</p>
<p>我想要更好更圆的月亮<br>想要未知的疯狂<br>想要声色的张扬<br>我想要你</p>
<embed src="http://www.xiami.com/widget/11097325_1773565409/singlePlayer.swf" type="application/x-shockwave-flash" width="257" height="33" wmode="transparent">]]></content>
    <summary type="html">
    <![CDATA[<p>我看过沙漠下暴雨<br>看过大海亲吻鲨鱼<br>看过黄昏追逐黎明<br>没看过你</p>
<p>我知道美丽会老去<br>生命之外还有生命<br>我知道风里有诗句<br>不知道你<br>]]>
    
    </summary>
    
      <category term="song" scheme="http://henng.com/tags/song/"/>
    
      <category term="民谣" scheme="http://henng.com/tags/%E6%B0%91%E8%B0%A3/"/>
    
      <category term="陈粒" scheme="http://henng.com/tags/%E9%99%88%E7%B2%92/"/>
    
      <category term="生活" scheme="http://henng.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
</feed>